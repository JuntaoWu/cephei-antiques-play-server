var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n["throw"](e))}catch(t){a(t)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(r,s)}c((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(r=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,a=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(r=c.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(n){i=[6,n],a=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,a,r,s,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__assign=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;n>i;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.jigsawImgGroupList=[n.gameJigsaw.jigsawImgGroup1,n.gameJigsaw.jigsawImgGroup2,n.gameJigsaw.jigsawImgGroup3,n.gameJigsaw.jigsawImgGroup4,n.gameJigsaw.jigsawImgGroup5,n.gameJigsaw.jigsawImgGroup6,n.gameJigsaw.jigsawImgGroup7,n.gameJigsaw.jigsawImgGroup8,n.gameJigsaw.jigsawImgGroup9],n.jigsawImgGroupList.forEach(function(e,t){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(e){e.stopImmediatePropagation(),n.jigsawImgclick(t)},n)}),n.gameJigsaw.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){return e=["m08_2","m08_5","m08_8","m08_4","","m08_7","m08_1","m08_3","m08_6"],this.gameJigsaw.step=15,this.jigsawImgGroupList.forEach(function(i,n){var o=i.getChildByName("jigsawImg");o.source=e[n],e[n]||(t.emptyIndex=n)}),[2]})})},i.prototype.jigsawImgclick=function(e){if(this.gameJigsaw.step&&(this.emptyIndex==e+1||this.emptyIndex==e-1||this.emptyIndex==e+3||this.emptyIndex==e-3)){var t=this.jigsawImgGroupList[e].getChildByName("jigsawImg"),i=this.jigsawImgGroupList[this.emptyIndex].getChildByName("jigsawImg");this.jigsawImgGroupList[e].addChild(i),this.jigsawImgGroupList[this.emptyIndex].addChild(t),this.emptyIndex=e,this.gameJigsaw.step-=1}},i.prototype.setResult=function(){var t=!0,i=["m08_1","","m08_2","m08_3","m08_4","m08_5","m08_6","m08_7","m08_8"];this.jigsawImgGroupList.forEach(function(e,n){var o=e.getChildByName("jigsawImg");o.source!=i[n]&&(t=!1)}),t?this.sendNotification(e.GameProxy.PASS_MINIGAME):(this.sendNotification(e.GameProxy.REDUCE_POWER),this.initData())},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameJigsaw.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.initData();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameJigsaw",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameJigsawM08Mediator",i}(puremvc.Mediator);e.MiniGameJigsawM08Mediator=t,__reflect(t.prototype,"ap.MiniGameJigsawM08Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(){function t(){}return t.checkForUpdate=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n=this;return __generator(this,function(o){switch(o.label){case 0:return"DebugPlatform"==e.platform.name?[2,{hasUpdate:!1}]:[4,e.platform.getVersion()];case 1:return t=o.sent()||0,console.log("Check version begin, current version is: "+t),i=new egret.HttpRequest,i.responseType=egret.HttpResponseType.TEXT,i.open(e.Constants.Endpoints.service+"version/check?version="+t,egret.HttpMethod.GET),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(),[2,new Promise(function(e,o){i.addEventListener(egret.Event.COMPLETE,function(i){var n=i.currentTarget,a=JSON.parse(n.response);return a.error?(console.error(a.message),o(a.message)):(console.log("Check version end, lastest version is: "+(a.data&&a.data.version||t)),e(a.data))},n)})]}})})},t.login=function(t){return __awaiter(this,void 0,void 0,function(){var i,n,o=this;return __generator(this,function(a){switch(a.label){case 0:return i=t,t&&(t.code||t.token)?[3,2]:[4,e.platform.login()];case 1:i=a.sent(),a.label=2;case 2:return console.log("Login app server begin, code: "+i.code+", token: "+i.token),n=new egret.HttpRequest,n.responseType=egret.HttpResponseType.TEXT,n.open(e.Constants.Endpoints.service+"users/"+("native"==e.platform.name?"login-native":"login-wxgame")+"?code="+(i.code||"")+"&token="+(i.token||""),egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(),[2,new Promise(function(t,i){n.addEventListener(egret.Event.COMPLETE,function(n){var o=n.currentTarget,a=JSON.parse(o.response);return a.error?(console.error(a.message),i(a.message)):(e.CommonData.logon=__assign({},e.CommonData.logon,a.data),console.log("Login app server end, unionId: "+(a.data&&a.data.unionId)+", wxgameOpenId: "+(a.data&&a.data.wxgameOpenId)),t())},o)})]}})})},t.loadUserInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return console.log("platform.getUserInfo begin."),this.userInfo&&this.userInfo.userId?[2,this.userInfo]:e.CommonData.logon&&e.CommonData.logon.userId?(this.userInfo=e.CommonData.logon,"native"==e.platform.name?e.platform.setSecurityStorageAsync(this.userInfo.anonymous?"anonymoustoken":"token",this.userInfo.token):"DebugPlatform"==e.platform.name&&e.platform.setStorage(this.userInfo.anonymous?"anonymoustoken":"token",this.userInfo.token),[2,this.userInfo]):[4,e.platform.getUserInfo()["catch"](function(e){console.error(e)})];case 1:return(t=i.sent())?[3,3]:(console.log("platform.getUserInfo failed now await authorizeUserInfo actively."),[4,e.platform.authorizeUserInfo(e.Constants.authorizeButtonImageUrl)["catch"](function(e){console.error(e)})]);case 2:t=i.sent(),i.label=3;case 3:return t?(console.log("platform.getUserInfo end."),this.userInfo=__assign({},t,{session_key:e.CommonData.logon.session_key}),[4,this.authorizeUserInfoViaAppServer(this.userInfo)]):(console.log("platform.getUserInfo end, userInfo is null."),this.userInfo={},[2,this.userInfo]);case 4:return i.sent(),e.CommonData.logon.userId=this.userInfo.userId,e.CommonData.logon.unionId=this.userInfo.unionId,e.CommonData.logon.token=this.userInfo.token,console.log("userInfo after authorizeUserInfoViaAppServer",this.userInfo),[2,this.userInfo]}})})},t.authorizeUserInfoViaAppServer=function(t){return __awaiter(this,void 0,void 0,function(){var t,i=this;return __generator(this,function(n){return e.CommonData.logon&&e.CommonData.logon.wxgameOpenId?(console.log("load users/info via app server begin, openId: "+e.CommonData.logon.wxgameOpenId+"."),this.userInfo.wxgameOpenId=e.CommonData.logon.wxgameOpenId,t=new egret.HttpRequest,t.responseType=egret.HttpResponseType.TEXT,t.open(e.Constants.Endpoints.service+"users/authorize-wxgame/?wxgameOpenId="+e.CommonData.logon.wxgameOpenId,egret.HttpMethod.POST),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(this.userInfo)),[2,new Promise(function(n,o){t.addEventListener(egret.Event.COMPLETE,function(t){console.log("load users/info via app server end.");var a=t.currentTarget,r=JSON.parse(a.response);if(r.error)return console.error(r.message),o(r.message);var s=r.data;return i.userInfo.userId=s.userId,i.userInfo.unionId=s.unionId,i.userInfo.nativeOpenId=s.nativeOpenId,i.userInfo.wxgameOpenId=s.wxgameOpenId,i.userInfo.token=s.token,e.platform.setStorage("token",s.token),n(i.userInfo)},i)})]):(console.log("We don't have wxgameOpenId now, skip."),[2,this.userInfo])})})},t.loadUserGameRecords=function(){return __awaiter(this,void 0,void 0,function(){var t,i=this;return __generator(this,function(n){return e.CommonData.logon&&e.CommonData.logon.userId?(console.log("loadUserGameRecords via app server begin, userId: "+e.CommonData.logon.userId+"."),t=new egret.HttpRequest,t.responseType=egret.HttpResponseType.TEXT,t.open(e.Constants.Endpoints.service+"records/?token="+e.CommonData.logon.token,egret.HttpMethod.POST),t.setRequestHeader("Content-Type","application/json"),t.send(),[2,new Promise(function(e,n){t.addEventListener(egret.Event.COMPLETE,function(t){console.log("loadUserGameRecords via app server end.");var o=t.currentTarget,a=JSON.parse(o.response);return a.error?(console.error(a.message),n(a.message)):(console.log("update current userInfo object"),e(i.userInfo))},i)})]):(console.log("We don't have unionId now, skip."),[2,this.userInfo])})})},t.saveUserGameRecords=function(t){if(e.CommonData.logon&&e.CommonData.logon.userId){console.log("saveUserGameRecords via app server begin, userId: "+e.CommonData.logon.userId+".");var i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(e.Constants.Endpoints.service+"records/create/?token="+e.CommonData.logon.token,egret.HttpMethod.POST),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(t)),i.addEventListener(egret.Event.COMPLETE,function(e){console.log("saveUserGameRecords via app server end.");var t=e.currentTarget,i=JSON.parse(t.response);i.error&&console.error(i.message)},this)}else console.log("We don't have openId now, skip.")},t}();e.AccountAdapter=t,__reflect(t.prototype,"ap.AccountAdapter")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this,"ApApplicationFacade")||this}return __extends(i,t),i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i.prototype.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(i.STARTUP,e.StartupCommand)},i.prototype.startUp=function(t){this.sendNotification(i.STARTUP,t),this.removeCommand(i.STARTUP),this.sendNotification(e.SceneCommand.CHANGE,e.Scene.Start)},i.prototype.registerMediator=function(e){t.prototype.registerMediator.call(this,e)},i.STARTUP="startup",i}(puremvc.Facade);e.ApplicationFacade=t,__reflect(t.prototype,"ap.ApplicationFacade",["puremvc.IFacade","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();e.AssetAdapter=t,__reflect(t.prototype,"ap.AssetAdapter",["eui.IAssetAdapter"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),Object.entries="function"==typeof Object.entries?Object.entries:function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var i=new e.AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new e.ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},i.prototype.retryAuthorize=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,e.AccountAdapter.loadUserInfo()];case 1:return t=i.sent(),t&&t.userId?(this.createGameScene(),[3,4]):[3,2];case 2:return[4,this.retryAuthorize()];case 3:i.sent(),i.label=4;case 4:return[2]}})})},i.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.loadingView.groupLoading.visible=!1,"wxgame"!=e.platform.name?[3,4]:[4,e.AccountAdapter.login()];case 2:return i.sent(),[4,this.retryAuthorize()];case 3:return i.sent(),[3,6];case 4:return"DebugPlatform"!=e.platform.name?[3,6]:(t=e.platform.getStorage("anonymoustoken"),[4,e.AccountAdapter.login({token:t})]);case 5:i.sent(),this.createGameScene(),i.label=6;case 6:return[2]}})})},i.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n;return __generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,e.AccountAdapter.checkForUpdate()];case 1:return t=o.sent(),t.hasUpdate&&e.platform.applyUpdate(t.version),[4,RES.loadConfig("ap.res.json",e.Constants.ResourceEndpoint+"resource/")];case 2:return o.sent(),[4,this.loadTheme()];case 3:return o.sent(),[4,RES.loadGroup("loading",1)];case 4:return o.sent(),i=new e.ApLoadingUI,this.stage.addChild(i),[4,RES.loadGroup("preload",0,i)];case 5:return o.sent(),RES.loadGroup("lazyload",0),this.stage.removeChild(i),[3,7];case 6:return n=o.sent(),console.error(n),[3,7];case 7:return[2]}})})},i.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/ap.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},i.prototype.createGameScene=function(){var t=this;egret.Tween.get(this.loadingView).to({alpha:0},1500).call(function(){t.stage.removeChild(t.loadingView)});var i=new e.AppContainer;this.addChild(i),e.ApplicationFacade.getInstance().startUp(i)},i.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},i.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},i}(eui.UILayer);e.Main=t,__reflect(t.prototype,"ap.Main")}(ap||(ap={}));var ap;!function(e){var t=function(){function t(){this.isConnected=!0}return Object.defineProperty(t.prototype,"env",{get:function(){return"dev"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"DebugPlatform"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appVersion",{get:function(){return"0.2.0"},enumerable:!0,configurable:!0}),t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:e.CommonData.logon&&e.CommonData.logon.unionId||"username"}]})})},t.prototype.authorizeUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:e.CommonData.logon&&e.CommonData.logon.unionId||"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{code:"anonymous",token:""}]})})},t.prototype.getVersion=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.getOpenDataContext=function(){return{postMessage:function(){},createDisplayObject:function(){}}},t.prototype.showShareMenu=function(){},t.prototype.getLaunchInfo=function(){},t.prototype.createRewardedVideoAd=function(){},t.prototype.showVideoAd=function(){},t.prototype.isVideoAdDisabled=function(){return!0},t.prototype.disableVideoAd=function(){},t.prototype.applyUpdate=function(){return!0},t.prototype.onNetworkStatusChange=function(e){},t.prototype.registerOnResume=function(e){},t.prototype.resume=function(){},t.prototype.showToast=function(e){console.log(e)},t.prototype.setStorage=function(e,t){localStorage.setItem(e,JSON.stringify(t))},t.prototype.getStorage=function(e){return JSON.parse(localStorage.getItem(e))},t.prototype.setStorageAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return localStorage.setItem(e,JSON.stringify(t)),[2]})})},t.prototype.getStorageAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,JSON.parse(localStorage.getItem(e))]})})},t.prototype.setSecurityStorageAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return localStorage.setItem(e,JSON.stringify(t)),[2]})})},t.prototype.getSecurityStorageAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,JSON.parse(localStorage.getItem(e))]})})},t.prototype.playVideo=function(){return{}},t.prototype.showPreImage=function(e,t){},t.prototype.showModal=function(e,t,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{confirm:!1,cancel:!0}]})})},t.prototype.showLoading=function(){return!0},t.prototype.hideLoading=function(){return!0},t.prototype.shareAppMessage=function(){},t.prototype.createBannerAd=function(e,t,i){},t.prototype.showBannerAd=function(e){void 0===e&&(e="bottom")},t.prototype.hideAllBannerAds=function(){},t.prototype.navigateToMiniProgram=function(){},t}();e.DebugPlatform=t,__reflect(t.prototype,"ap.DebugPlatform",["ap.Platform"]),e.platform=window.platform||new t}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}var r=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(c,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(n,generateJSON.paths[e])},r)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();e.ThemeAdapter=t,__reflect(t.prototype,"ap.ThemeAdapter",["eui.IThemeAdapter"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.startScreen=new e.StartScreen,i.gameScreen=new e.GameScreen,i.storeWindow=new e.StoreWindow,i.alpha=0,i}return __extends(i,t),i.prototype.enterStartScreen=function(){this.gameScreen.parent&&this.removeChild(this.gameScreen),this.addChild(this.startScreen),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.enterGameScreen=function(){this.startScreen.parent&&this.removeChild(this.startScreen),this.addChild(this.gameScreen),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showStoreWindow=function(){this.storeWindow||(this.storeWindow=new e.StoreWindow),this.addChild(this.storeWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showSceneSummaryWindow=function(){this.sceneWindow||(this.sceneWindow=new e.SceneSummaryWindow),this.addChild(this.sceneWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showSceneDetailsWindow=function(t){this.sceneDetailsWindow||(this.sceneDetailsWindow=new e.SceneDetailsWindow),this.sceneDetailsWindow.setSceneType(t),this.addChild(this.sceneDetailsWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showDeveloperWindow=function(){this.developerWindow||(this.developerWindow=new e.DeveloperWindow),this.addChild(this.developerWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showManageWindow=function(){this.manageWindow||(this.manageWindow=new e.ManageWindow),this.addChild(this.manageWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showSettingWindow=function(){this.settingWindow||(this.settingWindow=new e.SettingWindow),this.addChild(this.settingWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showGuideWindow=function(){this.guideWindow||(this.guideWindow=new e.NewPlayerGuide),this.addChild(this.guideWindow),egret.Tween.get(this).to({alpha:1},1500)},i.prototype.showPopupWindow=function(t,i,n){this.popupWindow||(this.popupWindow=new e.PopupWindow),this.popupWindow.setPopupWindow(t,i,n),this.addChild(this.popupWindow),this.popupWindow.verticalCenter=0,this.popupWindow.horizontalCenter=0,this.popupWindow.scaleX=.5,this.popupWindow.scaleY=.5,egret.Tween.get(this.popupWindow).to({scaleX:1,scaleY:1},500,egret.Ease.quadOut)},i}(eui.UILayer);e.AppContainer=t,__reflect(t.prototype,"ap.AppContainer")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){(new e.GameCommand).register(),(new e.SceneCommand).register()},i}(puremvc.SimpleCommand);e.ControllerPrepCommand=t,__reflect(t.prototype,"ap.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){this.facade().registerProxy(new e.GameProxy)},i}(puremvc.SimpleCommand);e.ModelPrepCommand=t,__reflect(t.prototype,"ap.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.initializeMacroCommand=function(){this.addSubCommand(e.ControllerPrepCommand),this.addSubCommand(e.ModelPrepCommand),this.addSubCommand(e.ViewPrepCommand)},i}(puremvc.MacroCommand);e.StartupCommand=t,__reflect(t.prototype,"ap.StartupCommand")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){var i=t.getBody();this.facade().registerMediator(new e.ApplicationMediator(i))},i}(puremvc.SimpleCommand);e.ViewPrepCommand=t,__reflect(t.prototype,"ap.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.register=function(){this.initializeNotifier("ApApplicationFacade"),this.facade().registerCommand(i.START_GAME,i)},i.prototype.execute=function(t){return __awaiter(this,void 0,void 0,function(){var i,n;return __generator(this,function(o){return i=this.facade().retrieveProxy(e.GameProxy.NAME),n=t.getBody(),t.getName(),[2]})})},i.NAME="GameCommand",i.START_GAME="start_game",i}(puremvc.SimpleCommand);e.GameCommand=t,__reflect(t.prototype,"ap.GameCommand",["puremvc.ICommand","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.register=function(){this.initializeNotifier("ApApplicationFacade")},i.prototype.initializeNotifier=function(e){t.prototype.initializeNotifier.call(this,e),this.facade().registerCommand(i.CHANGE,i),this.facade().registerCommand(i.SHOW_MANAGE,i),this.facade().registerCommand(i.SHOW_DEVE,i),this.facade().registerCommand(i.SHOW_STORE,i),this.facade().registerCommand(i.SHOW_SCENE,i),this.facade().registerCommand(i.SHOW_SCENE_DETAILS,i),this.facade().registerCommand(i.SHOW_SETTING,i),this.facade().registerCommand(i.SHOW_GUIDE,i),this.facade().registerCommand(i.SHOW_POPUP,i)},i.prototype.execute=function(t){return __awaiter(this,void 0,void 0,function(){var n,o,a;return __generator(this,function(r){switch(n=t.getBody(),o=this.facade().retrieveMediator(e.ApplicationMediator.NAME),a=this.facade().retrieveProxy(e.GameProxy.NAME),t.getName()){case i.CHANGE:n==e.Scene.Start?o.main.enterStartScreen():n==e.Scene.Game&&o.main.enterGameScreen();break;case i.SHOW_STORE:o.main.showStoreWindow();break;case i.SHOW_SCENE:o.main.showSceneSummaryWindow();break;case i.SHOW_SCENE_DETAILS:o.main.showSceneDetailsWindow(n);break;case i.SHOW_DEVE:o.main.showDeveloperWindow();break;case i.SHOW_MANAGE:o.main.showManageWindow();break;case i.SHOW_SETTING:o.main.showSettingWindow();break;case i.SHOW_GUIDE:o.main.showGuideWindow();break;case i.SHOW_POPUP:"string"==typeof n?o.main.showPopupWindow(n):o.main.showPopupWindow(n.msg,n.hasCancel,n.cbk)}return[2]})})},i.NAME="SceneCommand",i.CHANGE="scene_change",i.SHOW_MANAGE="show_manage",i.SHOW_DEVE="show_developer",i.SHOW_STORE="show_store",i.SHOW_SCENE="show_scene",i.SHOW_SCENE_DETAILS="show_scene_details",i.SHOW_SETTING="show_setting",i.SHOW_GUIDE="show_guide",i.SHOW_POPUP="show_popup",i}(puremvc.SimpleCommand);e.SceneCommand=t,__reflect(t.prototype,"ap.SceneCommand",["puremvc.ICommand","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e.playEffect=function(t){var i=this;switch(t){case"放大":e.beBig(i);break;case"消失":e.disappear2(i);break;case"渐变消失":e.disappear(i);break;case"渐变出现":e.gradualShow(i);break;case"头晕目眩":e.vagueImage(i);break;case"睁眼":e.gradualShow2(i);break;case"晃动":e.shakeTarget(i);break;case"剧烈抖动":e.shakeTargetSevere(i);break;case"渐亮":e.gradualClear(i);break;case"放大一下消失":e.beBigAndDisappear(i);break;case"由模糊变清晰":e.vagueToClear(i);break;case"画面慢慢变模糊变黑":e.gradualVague(i);break;case"画面扭曲变形渐变":e.gradualDistort(i)}},e.beBig=function(e){egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100)},e.disappear=function(e){egret.Tween.get(e).to({alpha:0},800)},e.gradualClear=function(e){e.alpha=.8,egret.Tween.get(e).to({alpha:1},800)},e.beBigAndDisappear=function(e){egret.Tween.get(e).to({scaleX:1.2,scaleY:1.2},100).to({alpha:0},500)},e.disappear2=function(e){e.alpha=0},e.gradualShow=function(e){e.alpha=0,egret.Tween.get(e).to({alpha:1},800)},e.shakeTargetSevere=function(e){egret.Tween.get(e,{loop:!0}).to({x:-10},200).to({x:10},400).to({x:0},200),egret.setTimeout(function(){egret.Tween.removeTweens(e),e.x=0},this,4e3)},e.shakeTarget=function(e){egret.Tween.get(e,{loop:!0}).to({x:-10},500).to({x:10},1e3).to({x:0},500),egret.setTimeout(function(){egret.Tween.removeTweens(e),e.x=0},this,4e3)},e.gradualShow2=function(e){var t=this,i=new egret.Shape;i.touchEnabled=!1,e.touchEnabled=!1,i.name="added",e.addChild(i),i.x=e.width/2,i.y=e.height/2;var n=e.width,o=function(){egret.setTimeout(function(){i.graphics.beginFill(16777215),i.graphics.drawCircle(0,0,e.width-n),i.graphics.endFill(),e.mask=null,e.mask=i,n-=8,e.width-n<1.5*e.width?o():(e.mask=null,i.parent&&i.parent.removeChild(i))},t,20)};o(),e.alpha=0,egret.setTimeout(function(){egret.Tween.get(e).to({alpha:1},2500)},this,400)},e.vagueImage=function(e){var t=e,i=new eui.Image;i.width=t.width,i.height=t.height,i.source=t.source,i.alpha=.3;var n=t.parent.getChildIndex(t)+1;i.name="added",t.parent.addChildAt(i,n),egret.Tween.get(i,{loop:!0}).to({x:-10,y:-10,rotation:1},500).to({x:10,y:10,rotation:-1},1e3).to({x:0,y:0,rotation:0},500),egret.setTimeout(function(){egret.Tween.removeTweens(i),i.parent&&i.parent.removeChild(i)},this,4e3)},e.vagueToClear=function(e){var t=e,i=new eui.Image;i.width=t.width,i.height=t.height,i.source=t.source,i.x=i.y=2,i.alpha=.8;var n=t.parent.getChildIndex(t)+1;i.name="added",t.parent.addChildAt(i,n),egret.Tween.get(i).to({alpha:0,x:0,y:0},1e3).call(function(){i.parent&&i.parent.removeChild(i)})},e.gradualVague=function(e){var t=e,i=new eui.Image;i.width=t.width,i.height=t.height,i.source=t.source,i.x=i.y=5,i.alpha=0;var n=t.parent.getChildIndex(t)+1;i.name="added",t.parent.addChildAt(i,n),egret.Tween.get(i).to({alpha:.6},2e3).to({alpha:0},2e3),egret.Tween.get(t).to({alpha:0},4e3).call(function(){i.parent&&i.parent.removeChild(i)})},e.gradualDistort=function(e){e.scaleX=1,e.scaleY=1.1,egret.Tween.get(e).to({scaleX:1.05,scaleY:1.05},500).to({scaleX:1.1,scaleY:1},500).to({scaleX:1,scaleY:1.1},1e3).to({scaleX:1.05,scaleY:1.05},500).to({scaleX:1.1,scaleY:1},500).to({scaleX:1.05,scaleY:1.05},500).to({scaleX:1,scaleY:1},1e3)},e}();e.EffectManager=t,__reflect(t.prototype,"ap.EffectManager")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var n=t.call(this,i.NAME)||this;return n.playerInfo={plotId:1,collectedScenes:[],fatigueValue:e.fatigueValue,gold:"0",lastEntryTime:"",hints:0,time:24,guPrice:[0,0,0,0],guColl:[5,5,5,5],guEventList:[],sound:!0,music:!0,isManage:!1,isShowGuide:!0,ending:[],pointHunag:43,pointMu:43,_v:1},n}return __extends(i,t),Object.defineProperty(i.prototype,"questions",{get:function(){return this._questions||(this._questions=new Map(Object.entries(RES.getRes("question_json")))),this._questions},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"chapterPlot",{get:function(){return this._chapterPlot||(this._chapterPlot=new Map(Object.entries(RES.getRes("chapter-plot_json")))),this._chapterPlot},enumerable:!0,configurable:!0}),i.prototype.getCurrentPlot=function(){return this.savePlayerInfoToStorage(),this.chapterPlot.get(this.playerInfo.plotId.toString())},Object.defineProperty(i.prototype,"changeArr",{get:function(){return this._changeArr||(this._changeArr=new Map(Object.entries(RES.getRes("manage-change_json")))),this._changeArr},enumerable:!0,configurable:!0}),i.prototype.resetGame=function(){this.playerInfo.plotId=1,this.playerInfo.pointMu=this.playerInfo.pointHunag=43,this.playerInfo.fatigueValue=e.fatigueValue,this.savePlayerInfoToStorage()},i.prototype.nextPlot=function(e){void 0===e&&(e=1),this.playerInfo.plotId+=e},i.prototype.canReduecePower=function(e){return void 0===e&&(e=1),this.playerInfo.fatigueValue>=e},i.prototype.addEnding=function(e){this.playerInfo.ending.includes(e)||(this.playerInfo.ending.push(e),this.savePlayerInfoToStorage())},i.prototype.addCollectedScenes=function(e){"s0"!=e&&(this.playerInfo.collectedScenes.includes(e)||(this.playerInfo.collectedScenes.push(e),this.savePlayerInfoToStorage()))},i.prototype.goldchange=function(e){this.playerInfo.gold=(Number(this.playerInfo.gold)+e).toString(),this.savePlayerInfoToStorage()},i.prototype.reducePower=function(e){void 0===e&&(e=1),this.playerInfo.fatigueValue-=e,this.savePlayerInfoToStorage(),console.log("减",e,"体力，剩余体力值：",this.playerInfo.fatigueValue)},i.prototype.reduceHints=function(e){void 0===e&&(e=1),this.playerInfo.hints-=e,this.savePlayerInfoToStorage()},Object.defineProperty(i.prototype,"sceneRes",{get:function(){if(!this._sceneRes){var e=RES.getRes("scene_json"),t=_(e).groupBy(function(e){return e.type}).value();this._sceneRes=new Map(Object.entries(t))}return this._sceneRes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"manageEventArr",{get:function(){return this._manageEventArr||(this._manageEventArr=RES.getRes("manage-event_json")),this._manageEventArr},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"manageEventMap",{get:function(){if(!this._manageEvent){var e=_(this.manageEventArr).groupBy(function(e){return e.type}).value();this._manageEvent=new Map(Object.entries(e))}return this._manageEvent},enumerable:!0,configurable:!0}),i.prototype.getRandomManageEvent=function(){var e=this,t=Math.random()<.3?"小游戏":Math.random()<.5?"随机事件":"角色",i=this.manageEventMap.get(t),n=i.filter(function(t){return!e.playerInfo.guEventList.includes(t.id)});if("小游戏"==t&&(n=i.filter(function(t){return!e.playerInfo.guEventList.includes(t.subType)
}),n.length||(n=i)),this.playerInfo.time<=0)return null;if(n.length){var o=_.random(0,n.length-1);return"小游戏"!=n[o].type?this.playerInfo.guEventList.push(n[o].id):this.playerInfo.guEventList.push(n[o].subType),n[o]}return this.getRandomManageEvent()},i.prototype.getPlayerInfoFromStorage=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.platform.getStorageAsync("playerInfo")];case 1:return t=n.sent(),console.log("mergeRemoteInfoToStorage: parse playerInfo"),this.playerInfo=Object.assign(this.playerInfo,JSON.parse(t.data)),console.log(this.playerInfo),[3,3];case 2:return i=n.sent(),console.error("localPlayerInfo is not JSON, skip."),[3,3];case 3:return this.playerInfo.lastEntryTime&&this.playerInfo.lastEntryTime==(new Date).toJSON().substr(0,10)||(this.playerInfo.isShowGuide=!0,this.playerInfo.time=24,this.playerInfo.guPrice=[0,0,0,0],this.playerInfo.guColl=[5,5,5,5],this.playerInfo.guEventList=[],this.playerInfo.lastEntryTime=(new Date).toJSON().substr(0,10),this.savePlayerInfoToStorage()),[2]}})})},i.prototype.savePlayerInfoToStorage=function(){try{e.platform.setStorageAsync("playerInfo",JSON.stringify(this.playerInfo))}catch(t){console.error(t)}},i.NAME="GameProxy",i.SHOW_MINIGAME="show_minigame",i.RESET_MINIGAME="reset_minigame",i.CONFIRM_MINIGAME="confirm_minigame",i.PASS_MINIGAME="pass_minigame",i.REDUCE_POWER="reduce_power",i}(puremvc.Proxy);e.GameProxy=t,__reflect(t.prototype,"ap.GameProxy",["puremvc.IProxy","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e.logon={},e}();e.CommonData=t,__reflect(t.prototype,"ap.CommonData")}(ap||(ap={}));var ap;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"ResourceEndpoint",{get:function(){return"dev"==e.platform.env?this.Endpoints.localResource:this.Endpoints.remoteResource},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Endpoints",{get:function(){return"dev"==e.platform.env?{service:"http://gdjzj.hzsdgames.com:8091/",localResource:"",remoteResource:"http://gdjzj.hzsdgames.com:8091/miniGame/"}:"prod"==e.platform.env?{service:"http://gdjzj.hzsdgames.com:8091/",localResource:"",remoteResource:"http://gdjzj.hzsdgames.com:8091/miniGame/"}:void 0},enumerable:!0,configurable:!0}),t.authorizeButtonImageUrl=t.ResourceEndpoint+"resource/assets/Button/btn-wxlogin.png",t.gameTitle="寻墨探宝",t.shareImageUrl=t.ResourceEndpoint+"resource/assets/start/logo.png",t}();e.Constants=t,__reflect(t.prototype,"ap.Constants");var i;!function(e){e[e.Start=1]="Start",e[e.Game=2]="Game"}(i=e.Scene||(e.Scene={})),e.gameType={Input:"填空",Select:"选择",MiniGame:"小游戏"},e.SceneType={SceneBg:"场景CG",ScenePerson:"人物CG",SceneProps:"道具CG"},e.plotType={PlotChange:"切换",PlotAdded:"追加",PlotQuestion:"谜题",Transition:"转场特效",PageChange:"界面切换经营"},e.fatigueValue=100,e.Antiques=["木器","书画","青铜","金玉"],e.PlotEnding=["m1","m2"]}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e}();e.Change=t,__reflect(t.prototype,"ap.Change")}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e}();e.PlayerInfo=t,__reflect(t.prototype,"ap.PlayerInfo")}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e}();e.Plot=t,__reflect(t.prototype,"ap.Plot")}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e}();e.QuestionGame=t,__reflect(t.prototype,"ap.QuestionGame")}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e}();e.UserInfo=t,__reflect(t.prototype,"ap.UserInfo")}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e.createDragonBone=function(e,t){var i=dragonBones.EgretFactory.factory;if(!i.getDragonBonesData(e)){var n=RES.getRes(e+"_ske_json");i.parseDragonBonesData(n)}if(!i.getTextureAtlasData(e)){var o=RES.getRes(e+"_tex_json"),a=RES.getRes(e+"_tex_png");i.parseTextureAtlasData(o,a)}var r=i.buildArmatureDisplay(t);return r.x=200,r.y=300,r},e}();e.DragonBones=t,__reflect(t.prototype,"ap.DragonBones")}(ap||(ap={}));var ap;!function(e){var t=function(){function e(){}return e.playSoundEffect=function(e){var t=RES.getRes(e);return t?t.play(0,1):void console.error("playSoundEffect: Unable to load sound: "+e)},e.stopBGM=function(){for(var t in e.musicClips)if(e.musicClips.hasOwnProperty(t)){var i=e.musicClips[t];i.stop()}},e.playBGM=function(t){e.stopBGM();var i=RES.getRes(t);return i?(e.musicClips[t]=i.play(),e.musicClips[t]):void console.error("playBGM: Unable to load music: "+t)},e.musicClips={},e}();e.SoundPool=t,__reflect(t.prototype,"ap.SoundPool")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){e.getName()},Object.defineProperty(t.prototype,"main",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="ApplicationMediator",t}(puremvc.Mediator);e.ApplicationMediator=t,__reflect(t.prototype,"ap.ApplicationMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.loadResGroup(),o.gameScreen.textGroup.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.touchBegin,o),o.gameScreen.textGroup.addEventListener(egret.TouchEvent.TOUCH_END,o.touchEnd,o),o.gameScreen.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnBackClick,o),o.gameScreen.btnManage.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnManageClick,o),o.gameScreen.btnPicture.addEventListener(egret.TouchEvent.TOUCH_TAP,o.pictClick,o),o.gameScreen.btnTips.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnTipsClick,o),o.gameScreen.btnHelp.addEventListener(egret.TouchEvent.TOUCH_TAP,o.share,o),o.gameScreen.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnResetClick,o),o.gameScreen.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnConfirmClick,o),o.gameScreen.sceneGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},o),o.gameScreen.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.initData(),o}return __extends(i,t),i.prototype.loadResGroup=function(){var e=this.proxy.chapterPlot.get(this.proxy.playerInfo.plotId.toString()).chapter;console.log("loadResGroup：chapter"+e);try{RES.loadGroup("chapter"+e,0)}catch(t){console.log(t)}},Object.defineProperty(i.prototype,"plotOptions",{get:function(){return this._plotOptions||(this._plotOptions=new Map(Object.entries(RES.getRes("plot-options_json")))),this._plotOptions},enumerable:!0,configurable:!0}),i.prototype.initData=function(){var t=this;this.gameScreen.miniGame.removeChildren(),this.aa&&this.aa.parent&&this.aa.parent.removeChild(this.aa),this.gameScreen.bottomGroup.visible=this.gameScreen.plotSelectList.visible=this.gameScreen.questionGroup.visible=this.gameScreen.miniGame.visible=!1,this.gameScreen.showReset=this.gameScreen.showTransition=this.canGoNext=!1,this.gameScreen.question=this.gameScreen.points="",this.gameScreen.scrollGroup.bottom=20,this.gameScreen.scrollGroup.viewport.scrollV=0,this.gameScreen.fatigueValue.text=this.proxy.playerInfo.fatigueValue.toString(),this.gameScreen.no_btnmanage.visible=!this.proxy.playerInfo.isManage,this.gameScreen.btnManage.visible=this.proxy.playerInfo.isManage;var i=this.gameScreen.huangAndMubar.getChildByName("huangyanyan"),n=this.gameScreen.huangAndMubar.getChildByName("munai");i.width=this.gameScreen.huangAndMubar.width*this.proxy.playerInfo.pointHunag/86,n.width=this.gameScreen.huangAndMubar.width*this.proxy.playerInfo.pointMu/86;var o=this.proxy.getCurrentPlot();if(o){if(this.next=o.next||1,this.timeoutId&&(egret.clearTimeout(this.timeoutId),this.timeoutId=null),this.timeoutIdAddWord&&(egret.clearTimeout(this.timeoutIdAddWord),this.timeoutIdAddWord=null),o.type==e.plotType.PlotQuestion){this.gameScreen.showScene=!1,this.gameScreen.questionGroup.visible=!0,this.questionId=o.questionId,this.playAnim();var a=__assign({},this.proxy.questions.get(o.questionId.toString()));this.gameScreen.questionRes=a.img,this.gameScreen.description=a.description,this.gameScreen.question=a.question,this.rightText=a.right,this.questionPoints=[a.points1,a.points2],this.showPointsAll=this.gameScreen.showPoints=!1;var r=this.gameScreen.btnTips.getChildByName("hintGroup").getChildByName("hintCards");r.text=this.proxy.playerInfo.hints.toString(),"填空"==a.type?(this.gameScreen.bottomGroup.top=110,this.gameScreen.bottomGroup.visible=this.gameScreen.showReset=!0,this.gameScreen.showInput(a.id,a.answer)):"选择"==a.type?(this.gameScreen.bottomGroup.visible=!0,this.gameScreen.showSelect(a.optionsId)):"小游戏"==a.type&&(this.gameScreen.bottomGroup.top=0,this.sendNotification(e.GameProxy.SHOW_MINIGAME,a),this.gameScreen.miniGame.visible=this.gameScreen.showReset=!0),this.gameScreen.scrollGroup.bottom=this.gameScreen.footGroup.height,this.gameScreen.scrollGroup.viewport.scrollH=0}else if(o.type==e.plotType.Transition){if(this.loadResGroup(),"序章"!=o.effect){if(!this.proxy.canReduecePower(30))return this.sendNotification(e.SceneCommand.SHOW_POPUP,"需要消耗30点体力才可进入下一章(体力可在商城购买)"),void(this.canGoNext=!1);this.proxy.reducePower(30),this.gameScreen.fatigueValue.text=this.proxy.playerInfo.fatigueValue.toString()}this.gameScreen.showTransition=!0,this.gameScreen.transitionText=o.effect,this.timeoutId=egret.setTimeout(function(){t.showNext()},this,1500)}else if("界面切换经营"==o.type)this.proxy.playerInfo.time?(this.proxy.playerInfo.isManage||(this.proxy.playerInfo.isManage=!0,this.gameScreen.no_btnmanage.visible=!1,this.gameScreen.btnManage.visible=!0,this.proxy.goldchange(40)),this.gameScreen.showTransition=!0,this.gameScreen.transitionText="进入经营模式",this.timeoutId=egret.setTimeout(function(){t.gameScreen.showTransition=!1,t.btnManageClick()},this,1e3),this.canGoNext=!0):this.showNext();else{if(this.gameScreen.scrollGroup.bottom=20,this.gameScreen.scrollGroup.viewport.scrollV=0,this.gameScreen.showScene=!0,this.settingScene(o.res,o.portrait,o.effect,o.effectTrigger),o.type!=e.plotType.PlotAdded&&(this.gameScreen.description=""),o.description&&(this.textIsOver=!1,this.wordList=o.description.split(""),this.addWordToDescription()),o.talkId&&this.showPlotOption(o.talkId),this.proxy.playerInfo.sound&&o.sound){var s=o.sound.split("、"),c=o.playTime.toString().split("、");s.forEach(function(i,n){var o=1e3*+c[n].replace("s","");egret.setTimeout(function(){e.SoundPool.playSoundEffect(i)},t,o)})}if(o.autoNextTime){var h=1e3*+o.autoNextTime;this.timeoutId=egret.setTimeout(function(){t.showNext()},this,h)}}"end"==this.next&&(this.proxy.playerInfo.pointMu<this.proxy.playerInfo.pointHunag?(this.proxy.addEnding("m1"),this.sendNotification(e.SceneCommand.SHOW_POPUP,"达成木户加奈坏结局")):(this.proxy.addEnding("m2"),this.sendNotification(e.SceneCommand.SHOW_POPUP,"达成木户加奈好结局")))}},i.prototype.settingScene=function(t,i,n,o){var a=this,r=this.gameScreen.sceneGroup.getChildByName("added")||this.gameScreen.sceneGroup.parent.getChildByName("added");r&&r.parent.removeChild(r),this.gameScreen.sceneGroup.mask&&(this.gameScreen.sceneGroup.mask=null),egret.Tween.removeAllTweens(),this.gameScreen.sceneBg.horizontalCenter=0,this.gameScreen.sceneBg.y=0,this.gameScreen.sceneBg.alpha=this.gameScreen.sceneGroup.alpha=1,this.gameScreen.sceneAddGroup.removeChildren();var s=t.split("、");s.forEach(function(t,r){if(a.proxy.addCollectedScenes(t),r){var s=new eui.Image;s.source=t,s.alpha=1,i?s.scaleX=s.scaleY=1:s.scaleX=s.scaleY=.5,s.y=135,s.x=180*(r-1),a.gameScreen.sceneAddGroup.addChild(s),t==o&&e.EffectManager.playEffect.call(s,n)}else a.gameScreen.sceneBg.source=t,t==o&&e.EffectManager.playEffect.call(a.gameScreen.sceneBg,n)}),"all"==o&&e.EffectManager.playEffect.call(this.gameScreen.sceneGroup,n)},i.prototype.addWordToDescription=function(){var e=this;if(this.wordList.length)if(this.textIsOver)this.gameScreen.description+=this.wordList.join(""),this.wordList=[],this.canGoNext=!0;else{var t=this.wordList.shift();this.gameScreen.description=this.gameScreen.description+t,this.timeoutIdAddWord=egret.setTimeout(function(){e.addWordToDescription()},this,100)}else this.canGoNext=!0;var i=this.gameScreen.scrollGroup.viewport.contentHeight-this.gameScreen.scrollGroup.height;this.gameScreen.scrollGroup.viewport.scrollV=Math.max(0,i)},i.prototype.showPlotOption=function(t){var i=this;this.gameScreen.plotSelectList.visible=!0;var n=this.plotOptions.get(t.toString());if(n){this.gameScreen.question=n.question||"";var o=[{option:n.option1,result:n.result1,next:1},{option:n.option2,result:n.result2,next:2}];this.gameScreen.plotSelectList.dataProvider=new eui.ArrayCollection(o),this.gameScreen.plotSelectList.itemRenderer=e.QuestionSelectItemRenderer,this.gameScreen.plotSelectList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.selectItem,this)}egret.setTimeout(function(){i.gameScreen.scrollGroup.bottom=i.gameScreen.footGroup.height;var e=i.gameScreen.scrollGroup.viewport.contentHeight-i.gameScreen.scrollGroup.height;i.gameScreen.scrollGroup.viewport.scrollV=Math.max(0,e)},this,50)},i.prototype.selectItem=function(){var e=this,t=+this.gameScreen.plotSelectList.selectedItem.result;this.bb=new eui.Image,this.bb.source="heart",this.bb.alpha=1,this.bb.x=320,this.bb.y=1e3,this.gameScreen.addChild(this.bb),t>0?egret.Tween.get(this.bb).to({x:20,y:150},700):egret.Tween.get(this.bb).to({x:590,y:150},700),egret.setTimeout(function(){egret.Tween.get(e.bb).to({alpha:0},400).call(function(){e.gameScreen.removeChild(e.bb),e.showNext()})},this,700),this.proxy.playerInfo.pointHunag+=t,this.proxy.playerInfo.pointMu-=t,this.proxy.playerInfo.pointHunag>86||this.proxy.playerInfo.pointMu<0?(this.proxy.playerInfo.pointHunag=86,this.proxy.playerInfo.pointMu=0):(this.proxy.playerInfo.pointHunag<0||this.proxy.playerInfo.pointMu>86)&&(this.proxy.playerInfo.pointHunag=0,this.proxy.playerInfo.pointMu=86),this.next=this.gameScreen.plotSelectList.selectedItem.next,this.gameScreen.plotSelectList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.selectItem,this)},i.prototype.showRightResult=function(){this.gameScreen.description=this.rightText,this.canGoNext=!0,this.gameScreen.showReset=!1,this.aa||(this.aa=new eui.Image,this.aa.source="answer_right",this.aa.verticalCenter=-100,this.aa.horizontalCenter=0),this.aa.scaleX=.01,this.aa.scaleY=.01,this.gameScreen.addChild(this.aa),egret.Tween.get(this.aa).to({scaleX:1,scaleY:1},1500)},i.prototype.showNext=function(){return"end"==this.next?(this.proxy.resetGame(),void this.btnBackClick()):("over"==this.next?this.proxy.playerInfo.pointMu<this.proxy.playerInfo.pointHunag?this.proxy.nextPlot():this.proxy.nextPlot(2):this.proxy.nextPlot(this.next),void this.initData())},i.prototype.btnTipsClick=function(){if(this.gameScreen.showPoints=!this.gameScreen.showPoints,this.gameScreen.showPoints){if(!this.proxy.playerInfo.hints)return this.sendNotification(e.SceneCommand.SHOW_POPUP,"没有提示卡了，提示卡可在商城购买"),void(this.gameScreen.showPoints=!1);if(!this.showPointsAll){this.proxy.reduceHints();var t=this.gameScreen.btnTips.getChildByName("hintGroup").getChildByName("hintCards");t.text=this.proxy.playerInfo.hints.toString()}(this.gameScreen.points||!this.questionPoints[0]&&!this.questionPoints[1])&&(this.showPointsAll=!0),this.gameScreen.points=this.gameScreen.points?this.questionPoints[0]+"\n———————————————\n"+this.questionPoints[1]:this.questionPoints[0]}},i.prototype.btnBackClick=function(){this.sendNotification(e.SceneCommand.CHANGE,e.Scene.Start)},i.prototype.btnManageClick=function(){this.proxy.playerInfo.time?this.sendNotification(e.SceneCommand.SHOW_MANAGE):this.sendNotification(e.SceneCommand.SHOW_POPUP,"经营模式每日只能完成一次，今日经营模式已完成！")},i.prototype.pictClick=function(){this.sendNotification(e.SceneCommand.SHOW_SCENE)},i.prototype.touchBegin=function(e){e.stopImmediatePropagation(),this.beforeX=e.stageX,this.beforeY=e.stageY,this.touchBeginTime=(new Date).getTime()},i.prototype.touchEnd=function(e){if(e.stopImmediatePropagation(),this.textIsOver=!0,this.canGoNext){var t=(new Date).getTime();(e.stageX<this.beforeX-20&&Math.abs(e.stageY-this.beforeY)<20||t-this.touchBeginTime<300)&&this.showNext()}},i.prototype.touchReleaseOutside=function(e){},i.prototype.nextTestClick=function(){var e=this;this.textIsOver?egret.setTimeout(function(){e.showNext()},this,150):this.textIsOver=!0},i.prototype.btnResetClick=function(){this.sendNotification(e.GameProxy.RESET_MINIGAME,this.questionId)},i.prototype.btnConfirmClick=function(){return this.proxy.playerInfo.fatigueValue<=0?void this.sendNotification(e.SceneCommand.SHOW_POPUP,"没有体力破解谜题了！（体力可在商城购买）"):void this.sendNotification(e.GameProxy.CONFIRM_MINIGAME,this.questionId)},i.prototype.listNotificationInterests=function(){return[e.GameProxy.PASS_MINIGAME,e.GameProxy.REDUCE_POWER]},i.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case e.GameProxy.PASS_MINIGAME:this.showRightResult();break;case e.GameProxy.REDUCE_POWER:if(this.proxy.canReduecePower(10)){this.proxy.reducePower(10),this.gameScreen.fatigueValue.text=this.proxy.playerInfo.fatigueValue.toString();try{this.sendNotification(e.SceneCommand.SHOW_POPUP,"答案错误，扣除10点体力！"),this.btnResetClick()}catch(i){console.log(i)}}else this.sendNotification(e.SceneCommand.SHOW_POPUP,"没有体力了！")}},Object.defineProperty(i.prototype,"gameScreen",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.prototype.share=function(){e.platform.shareAppMessage(e.Constants.gameTitle,e.Constants.shareImageUrl)},i.prototype.playAnim=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(i){return this.heiban=new eui.Image,this.heiban.source="heiban",this.gameScreen.addChild(this.heiban),this.armatureDisplay||(this.armatureDisplay=e.DragonBones.createDragonBone("jiemi","Armature"),this.armatureDisplay.addEventListener(dragonBones.EventObject.COMPLETE,function(){t.heiban&&t.gameScreen.removeChild(t.heiban),t.gameScreen.removeChild(t.armatureDisplay)},this)),this.armatureDisplay.x=360,this.armatureDisplay.y=800,this.gameScreen.addChild(this.armatureDisplay),this.armatureDisplay.animation.play("newAnimation",1),[2]})})},i.NAME="GameScreenMediator",i.manage_show="manage_show",i}(puremvc.Mediator);e.GameScreenMediator=t,__reflect(t.prototype,"ap.GameScreenMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.paperList=[],e.recordList=[],e.answerList=[],e.jilu=[],e.is_touch_begin=!1,e.is_touch_move=!1,e.ischang=!1,e.is_move_end=!0,e.ww=!0,e.skinName="M14Skin",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.paperList=[this.no1,this.no2,this.no3,this.no4,this.no5,this.no6,this.no7,this.no8],this.paperList.forEach(function(t){e.jilu.push({x:t.x,y:t.y,rotation:t.rotation})}),this.answerList=[{x:450.5,y:250,ro:0},{x:270.5,y:100,ro:0},{x:85.5,y:100,ro:0},{x:450.5,y:100,ro:0},{x:85.5,y:250,ro:0},{x:630.5,y:250,ro:0},{x:630.5,y:100,ro:0},{x:270.5,y:250,ro:0}],this.paperList.forEach(function(t){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){e.record(t)},e),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.move,e),t.addEventListener(egret.TouchEvent.TOUCH_END,e.transposition,e)})},n.prototype.record=function(e){this.is_move_end&&(this.first_img=e,this.first_img.parent.addChild(this.first_img),this.first_img_x=e.x,this.first_img_y=e.y,this.is_move_end=!1,this.is_touch_begin=!0)},n.prototype.move=function(e){this.is_touch_begin&&(this.first_img.x=e.stageX,this.first_img.y=e.stageY-90-64.5,this.is_touch_move=!0)},n.prototype.transposition=function(e){var t=this;(this.is_touch_move||this.is_touch_begin)&&(this.is_touch_begin=!1,this.ischang=!1,this.first_img.x==this.first_img_x&&this.first_img.y==this.first_img_y?this.first_img.rotation=0==this.first_img.rotation?180:0:this.paperList.forEach(function(e){Math.abs(t.first_img.x-e.x)<=84.5&&Math.abs(t.first_img.y-e.y)<=64.5&&t.first_img!=e&&(egret.Tween.get(t.first_img).to({x:e.x,y:e.y},300),egret.Tween.get(e).to({x:t.first_img_x,y:t.first_img_y},300),t.ischang=!0)}),this.ischang||egret.Tween.get(this.first_img).to({x:this.first_img_x,y:this.first_img_y},300),egret.setTimeout(this.move_end,this,300),this.is_touch_move=!1)},n.prototype.move_end=function(){this.is_move_end=!0},n.prototype.iswin=function(){var t=this;this.ww=!0,this.paperList.forEach(function(e){var i=t.paperList.indexOf(e);(e.x!=t.answerList[i].x||e.y!=t.answerList[i].y||e.rotation!=t.answerList[i].ro)&&(t.ww=!1)}),this.ww?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},n.prototype.f5=function(){for(var e=0;8>e;e++)this.paperList[e].x=this.jilu[e].x,this.paperList[e].y=this.jilu[e].y,this.paperList[e].rotation=this.jilu[e].rotation},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M14=t,__reflect(t.prototype,"ap.M14",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM14.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.gameM14.f5(),[2]})})},i.prototype.setResult=function(){this.gameM14.iswin()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM14.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.gameM14.f5();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM14",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M14Mediator",i}(puremvc.Mediator);e.M14Mediator=i,__reflect(i.prototype,"ap.M14Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.arr=[],e.xx=0,e.skinName="M15",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.arr=[this.button1,this.button2,this.button3,this.button4],this.button1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.haha(1)},this),this.button2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.haha(2)},this),this.button3.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.haha(3)},this),this.button4.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.haha(4)},this)},n.prototype.haha=function(e){this.xx=e,this.arr.forEach(function(e){e.scaleX=1,e.scaleY=1}),this.arr[e-1].scaleX=.8,this.arr[e-1].scaleY=.8},n.prototype.iswin=function(){1!=this.xx?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER):(this.arr.forEach(function(e){e.scaleX=1,e.scaleY=1,e.enabled=!1}),e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME))},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M15=t,__reflect(t.prototype,"ap.M15",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM15.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.gameM15.xx=0,[2]})})},i.prototype.setResult=function(){this.gameM15.iswin()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM15.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.gameM15.xx=0;break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM15",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M15Mediator",i}(puremvc.Mediator);e.M15Mediator=i,__reflect(i.prototype,"ap.M15Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.wuqi=[],e.record=[],e.skinName="M17",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.wuqi=[this.di,this.jian,this.mao,this.ji],this.wuqi.forEach(function(t){e.record.push({x:t.x,y:t.y}),t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){e.begin(t)},e),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.move,e),t.addEventListener(egret.TouchEvent.TOUCH_END,e.end,e),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.end,e)})},n.prototype.begin=function(e){this.this_wuqi=e},n.prototype.move=function(e){this.this_wuqi.x=e.stageX-15,this.this_wuqi.y=e.stageY-120},n.prototype.end=function(e){if(e.stageX-15>200&&e.stageX-15<308&&e.stageY-120>320&&e.stageY-120<428)this.this_wuqi.x=254,this.this_wuqi.y=374;else if(e.stageX-15>400&&e.stageX-15<508&&e.stageY-120>320&&e.stageY-120<428)this.this_wuqi.x=454,this.this_wuqi.y=374;else{var t=this.wuqi.indexOf(this.this_wuqi);this.this_wuqi.x=this.record[t].x,this.this_wuqi.y=this.record[t].y}},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M17=t,__reflect(t.prototype,"ap.M17",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM17.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){for(e=0;4>e;e++)this.gameM17.wuqi[e].x=this.gameM17.record[e].x,this.gameM17.wuqi[e].y=this.gameM17.record[e].y;return[2]})})},i.prototype.setResult=function(){254==this.gameM17.di.x&&374==this.gameM17.di.y&&454==this.gameM17.jian.x&&374==this.gameM17.jian.y?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM17.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:for(var n=0;4>n;n++)this.gameM17.wuqi[n].x=this.gameM17.record[n].x,this.gameM17.wuqi[n].y=this.gameM17.record[n].y;break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM17",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M17Mediator",i}(puremvc.Mediator);e.M17Mediator=i,__reflect(i.prototype,"ap.M17Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.allCube=[],e.record=[],e.whiteCube=[],e.rowList=[2,58,114,173,229,285,344,400,456],e.columnList=[2,58,114,175,231,287,348,403,458],e.skinName="M2Skin",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.allCube=[this.red1,this.red2,this.red3,this.red4,this.red5,this.red6,this.red7,this.red8,this.red9,this.blue1,this.blue2,this.blue3,this.blue4,this.blue5,this.blue6,this.blue7,this.blue8,this.blue9,this.white1,this.white2,this.white3,this.white4,this.white5,this.white6,this.white7,this.white8,this.white9,this.black1,this.black2,this.black3,this.black4,this.black5,this.black6,this.black7,this.black8,this.black9,this.yellow1,this.yellow2,this.yellow3,this.yellow4,this.yellow5,this.yellow6,this.yellow7,this.yellow8,this.yellow9],this.allCube.forEach(function(t){e.record.push({x:t.x,y:t.y})}),this.whiteCube=[this.white1,this.white2,this.white3,this.white4,this.white5,this.white6,this.white7,this.white8,this.white9],this.row1_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(3,-1,"row")},this),this.row1_2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(3,1,"row")},this),this.row2_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(4,-1,"row")},this),this.row2_2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(4,1,"row")},this),this.row3_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(5,-1,"row")},this),this.row3_2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(5,1,"row")},this),this.column1_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(3,-1,"column")},this),this.column1_2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(3,1,"column")},this),this.column2_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(4,-1,"column")},this),this.column2_2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(4,1,"column")},this),this.column3_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(5,-1,"column")},this),this.column3_2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.moveCube(5,1,"column")},this)},n.prototype.moveCube=function(e,t,i){var n=this;this.allCube.forEach(function(o){if(o.y==n.columnList[e]&&"row"==i){var a=n.rowList.indexOf(o.x);a=(a+9+t)%9,o.x=n.rowList[a]}if(o.x==n.rowList[e]&&"column"==i){var r=n.columnList.indexOf(o.y);r=(r+9+t)%9,o.y=n.columnList[r]}})},n.prototype.isWin=function(){var t=this,i=!0;this.whiteCube.forEach(function(e){t.rowList[2]<e.x&&(i=!1)}),i?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M2=t,__reflect(t.prototype,"ap.M2",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM2.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.f5(),[2]})})},i.prototype.f5=function(){for(var e=0;45>e;e++)this.gameM2.allCube[e].x=this.gameM2.record[e].x,this.gameM2.allCube[e].y=this.gameM2.record[e].y},i.prototype.setResult=function(){this.gameM2.isWin()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM2.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.f5();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM2",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M2Mediator",i}(puremvc.Mediator);e.M2Mediator=i,__reflect(i.prototype,"ap.M2Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.arr1=[],e.arr2=[],e.skinName="M24",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))
},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.arr1=[this.hei,this.bai,this.zhu,this.he],this.arr2=[this.jiao,this.yi,this.ti,this.jia],this.arr1.forEach(function(t){t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){return e.haha(t,e.arr1)},e)}),this.arr2.forEach(function(t){t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){return e.haha(t,e.arr2)},e)})},n.prototype.haha=function(e,t){t.forEach(function(e){e.scaleX=1,e.scaleY=1}),e.scaleX=.8,e.scaleY=.8},n.prototype.iswin=function(){.8==this.bai.scaleX&&.8==this.jiao.scaleX?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M24=t,__reflect(t.prototype,"ap.M24",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM24.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.gameM24.arr1.forEach(function(e){e.scaleX=1,e.scaleY=1}),this.gameM24.arr2.forEach(function(e){e.scaleX=1,e.scaleY=1}),[2]})})},i.prototype.setResult=function(){this.gameM24.iswin()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM24.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.gameM24.arr1.forEach(function(e){e.scaleX=1,e.scaleY=1}),this.gameM24.arr2.forEach(function(e){e.scaleX=1,e.scaleY=1});break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM24",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M24Mediator",i}(puremvc.Mediator);e.M24Mediator=i,__reflect(i.prototype,"ap.M24Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.timeOnEnterFrame=0,e.skinName="M3_2Skin",e.once(egret.Event.ADDED_TO_STAGE,e.onLoad,e),e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var i=this;t.prototype.childrenCreated.call(this);var n=[{image:"word_ren"},{image:"word_xin"},{image:"word_guo"},{image:"word_shi"}],o=new eui.ArrayCollection(n);this.wordList1.dataProvider=o,this.wordList2.dataProvider=o,this.wordList3.dataProvider=o,this.wordList4.dataProvider=o,this.wordList1.itemRenderer=e.wordList,this.wordList2.itemRenderer=e.wordList,this.wordList3.itemRenderer=e.wordList,this.wordList4.itemRenderer=e.wordList,this.word1.verticalScrollBar=null,this.word2.verticalScrollBar=null,this.word3.verticalScrollBar=null,this.word4.verticalScrollBar=null,this.word1.addEventListener(eui.UIEvent.CHANGE_END,function(){return i.stoptouch(i.word1)},this),this.word2.addEventListener(eui.UIEvent.CHANGE_END,function(){return i.stoptouch(i.word2)},this),this.word3.addEventListener(eui.UIEvent.CHANGE_END,function(){return i.stoptouch(i.word3)},this),this.word4.addEventListener(eui.UIEvent.CHANGE_END,function(){return i.stoptouch(i.word4)},this),this.turnOffLight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.turn,this),this.turnOnLight.addEventListener(egret.TouchEvent.TOUCH_TAP,this.turn,this),this.word1.viewport.scrollV=0,this.word2.viewport.scrollV=0,this.word3.viewport.scrollV=0,this.word4.viewport.scrollV=0,this.bright.visible=!0},n.prototype.stoptouch=function(e){-70<e.viewport.scrollV&&e.viewport.scrollV<70?e.viewport.scrollV=0:70<e.viewport.scrollV&&e.viewport.scrollV<210?e.viewport.scrollV=140:210<e.viewport.scrollV&&e.viewport.scrollV<350?e.viewport.scrollV=280:350<e.viewport.scrollV&&e.viewport.scrollV<490&&(e.viewport.scrollV=420)},n.prototype.isWin=function(){0==this.word1.viewport.scrollV&&420==this.word2.viewport.scrollV&&280==this.word3.viewport.scrollV&&140==this.word4.viewport.scrollV?(e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME),this.turnOffLight.enabled=!1,this.turnOnLight.enabled=!1):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},n.prototype.turn=function(){this.bright.visible=this.bright.visible?!1:!0},n.prototype.onLoad=function(e){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},n.prototype.onEnterFrame=function(e){egret.getTimer(),this.timeOnEnterFrame;this.timeOnEnterFrame=egret.getTimer(),this.wordLoop(this.word1),this.wordLoop(this.word2),this.wordLoop(this.word3),this.wordLoop(this.word4)},n.prototype.wordLoop=function(e){e.viewport.scrollV<-70&&(e.viewport.scrollV=490),e.viewport.scrollV>490&&(e.viewport.scrollV=-70)},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M3_2=t,__reflect(t.prototype,"ap.M3_2",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM3_2.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.f5(),[2]})})},i.prototype.f5=function(){this.gameM3_2.word1.viewport.scrollV=0,this.gameM3_2.word2.viewport.scrollV=0,this.gameM3_2.word3.viewport.scrollV=0,this.gameM3_2.word4.viewport.scrollV=0,this.gameM3_2.bright.visible=!0},i.prototype.setResult=function(){this.gameM3_2.isWin()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM3_2.questionId!=i)return void this.f5();switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.f5();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM3_2",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M3_2Mediator",i}(puremvc.Mediator);e.M3_2Mediator=i,__reflect(i.prototype,"ap.M3_2Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.moveCube=[],e.allCube=[],e.record=[],e.skinName="M5Skin",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.moveCube=[this.cube1,this.cube2,this.cube3,this.cube4,this.cube5,this.cube6,this.cube7,this.cube8,this.cube9,this.cube10,this.cube11],this.moveCube.forEach(function(t){e.record.push({x:t.x,y:t.y})}),this.allCube=[this.cube1,this.cube2,this.cube3,this.cube4,this.cube5,this.cube6,this.cube7,this.cube8,this.cube9,this.cube10,this.cube11,this.Start,this.End],this.moveCube.forEach(function(t){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(i){e.touchBegin(t,i)},e),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.touchEnd,e)})},n.prototype.touchBegin=function(e,t){this.nowCube=e,this.touchPointBegin_x=t.stageX,this.touchPointBegin_y=t.stageY},n.prototype.touchEnd=function(e){var t=this;if(this.X=e.stageX-this.touchPointBegin_x,this.Y=e.stageY-this.touchPointBegin_y,Math.abs(this.X)>Math.abs(this.Y))if(this.X>0){var i=this.allCube.some(function(e){return e.x==t.nowCube.x+120&&e.y==t.nowCube.y});360==this.nowCube.x||i||(this.nowCube.x+=120)}else{var i=this.allCube.some(function(e){return e.x==t.nowCube.x-120&&e.y==t.nowCube.y});0==this.nowCube.x||i||(this.nowCube.x-=120)}else if(Math.abs(this.X)<Math.abs(this.Y))if(this.Y>0){var i=this.allCube.some(function(e){return e.y==t.nowCube.y+120&&e.x==t.nowCube.x});360==this.nowCube.y||i||(this.nowCube.y+=120)}else{var i=this.allCube.some(function(e){return e.y==t.nowCube.y-120&&e.x==t.nowCube.x});0==this.nowCube.y||i||(this.nowCube.y-=120)}},n.prototype.isWin=function(){0==this.cube7.x&&120==this.cube7.y&&120==this.cube3.x&&240==this.cube3.y&&240==this.cube2.x&&240==this.cube2.y&&360==this.cube10.x&&240==this.cube10.y?120==this.cube8.x&&120==this.cube8.y&&360==this.cube9.x&&120==this.cube9.y?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):120==this.cube9.x&&120==this.cube9.y&&360==this.cube8.x&&120==this.cube8.y&&e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M5=t,__reflect(t.prototype,"ap.M5",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM5.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){for(e=0;11>e;e++)this.gameM5.moveCube[e].x=this.gameM5.record[e].x,this.gameM5.moveCube[e].y=this.gameM5.record[e].y;return[2]})})},i.prototype.setResult=function(){this.gameM5.isWin()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM5.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:for(var n=0;11>n;n++)this.gameM5.moveCube[n].x=this.gameM5.record[n].x,this.gameM5.moveCube[n].y=this.gameM5.record[n].y;break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM5",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M5Mediator",i}(puremvc.Mediator);e.M5Mediator=i,__reflect(i.prototype,"ap.M5Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.allButton=[],e.password="0",e.skinName="M6Skin",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.allButton=[this.button1,this.button2,this.button3,this.button4,this.button5],this.button1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.key(e.button1,"1")},this),this.button2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.key(e.button2,"2")},this),this.button3.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.key(e.button3,"3")},this),this.button4.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.key(e.button4,"4")},this),this.button5.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.key(e.button5,"5")},this)},n.prototype.key=function(e,t){e.enabled=!1,e.scaleX=.8,e.scaleY=.8,this.password+=t},n.prototype.queren=function(){5==this.password.length&&"05421"==this.password?e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME):e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER)},n.prototype.tryAgain=function(){this.password="0",this.allButton.forEach(function(e){e.enabled=!0,e.scaleX=1,e.scaleY=1})},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M6=t,__reflect(t.prototype,"ap.M6",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM6.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.gameM6.tryAgain(),[2]})})},i.prototype.setResult=function(){this.gameM6.queren()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM6.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.gameM6.tryAgain();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM6",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M6Mediator",i}(puremvc.Mediator);e.M6Mediator=i,__reflect(i.prototype,"ap.M6Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.heng=[],e.shu=[],e.zhangai=[],e.skinName="M9",e}return __extends(n,t),n.prototype.partAdded=function(n,o){t.prototype.partAdded.call(this,n,o),e.ApplicationFacade.getInstance().registerMediator(new i(this))},n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.bushu.text="8",this.heng=[119,163,207,251,295,339,383,427,471,515,559,603],this.shu=[81,125,169,213,257,301,345,389,433,477],this.zhangai=[{x:163,y:169},{x:603,y:169},{x:339,y:213},{x:515,y:213},{x:119,y:257},{x:163,y:301},{x:559,y:345},{x:119,y:389},{x:471,y:389},{x:207,y:477}],this.bg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.start,this),this.bg.addEventListener(egret.TouchEvent.TOUCH_END,this.end,this)},n.prototype.start=function(e){this.start_x=e.stageX,this.start_y=e.stageY},n.prototype.end=function(t){var i=Number(this.bushu.text);if(i-=1,0>i)console.log("失败"),this.f5(),e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER);else{this.bushu.text=i.toString();var n=Math.abs(t.stageX-this.start_x),o=Math.abs(t.stageY-this.start_y);n>o?t.stageX-this.start_x>0?this.you():this.zuo():t.stageY-this.start_y>0?this.xia():this.shang()}},n.prototype.you=function(){var e=this;this.can_move=!0,603!=this.ren.x?(this.ren.x+=44,this.haha(),this.zhangai.forEach(function(t){t.x==e.ren.x&&t.y==e.ren.y&&(e.ren.x-=44,e.can_move=!1)}),this.can_move&&this.you()):this.can_move=!1},n.prototype.zuo=function(){var e=this;this.can_move=!0,119!=this.ren.x?(this.ren.x-=44,this.haha(),this.zhangai.forEach(function(t){t.x==e.ren.x&&t.y==e.ren.y&&(e.ren.x+=44,e.can_move=!1)}),this.can_move&&this.zuo()):this.can_move=!1},n.prototype.xia=function(){var e=this;this.can_move=!0,477!=this.ren.y?(this.ren.y+=44,this.haha(),this.zhangai.forEach(function(t){t.x==e.ren.x&&t.y==e.ren.y&&(e.ren.y-=44,e.can_move=!1)}),this.can_move&&this.xia()):this.can_move=!1},n.prototype.shang=function(){var e=this;this.can_move=!0,81!=this.ren.y?(this.ren.y-=44,this.haha(),this.zhangai.forEach(function(t){t.x==e.ren.x&&t.y==e.ren.y&&(e.ren.y+=44,e.can_move=!1)}),this.can_move&&this.shang()):this.can_move=!1},n.prototype.haha=function(){515==this.ren.x&&257==this.ren.y&&(515==this.ren.x,257==this.ren.y,this.can_move=!1)},n.prototype.f5=function(){this.bushu.text="8",this.ren.x=427,this.ren.y=169},n.prototype.setQuestionId=function(e){this.questionId=e},n}(eui.Component);e.M9=t,__reflect(t.prototype,"ap.M9",["eui.UIComponent","egret.DisplayObject"]);var i=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameM9.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.gameM9.f5(),[2]})})},i.prototype.setResult=function(){515==this.gameM9.ren.x&&257==this.gameM9.ren.y?(this.gameM9.ren.visible=!1,e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.PASS_MINIGAME)):"0"!=this.gameM9.bushu.text||this.gameM9.can_move||(this.gameM9.f5(),e.ApplicationFacade.getInstance().sendNotification(e.GameProxy.REDUCE_POWER))},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameM9.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.gameM9.f5();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameM9",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="M9Mediator",i}(puremvc.Mediator);e.M9Mediator=i,__reflect(i.prototype,"ap.M9Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return o.baolist=[],o.pricelist=[],o.colllist=[],o.gulist=["木器","书画","青铜","玉石"],o.xuanze=0,o.eachGu=0,o.ary=[0,0,0,0],o.ary2=[0,0,0,0],o.shuzu=[1,1,1,1],o.zongjiazhi=10,o.zongbaowushu=20,o.five=[-1,-1,-1,-1],t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.manageWindow.btnPlot.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnPlotClick,o),o.manageWindow.btnPicture.addEventListener(egret.TouchEvent.TOUCH_TAP,o.pictClick,o),o.manageWindow.yes.addEventListener(egret.TouchEvent.TOUCH_TAP,o.yes,o),o.manageWindow.no.addEventListener(egret.TouchEvent.TOUCH_TAP,o.no,o),o.manageWindow.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.manageWindow.gameList.addEventListener(eui.ItemTapEvent.ITEM_TAP,o.selectItem,o),o.manageWindow.text2.addEventListener(egret.TouchEvent.TOUCH_TAP,o.nextManageEvent,o),o.manageWindow.setMiniGame.addEventListener(egret.TouchEvent.TOUCH_TAP,o.setMiniGame,o),o.manageWindow.btnTutorial.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){o.manageWindow.close(),o.sendNotification(e.SceneCommand.SHOW_GUIDE)},o),o.initData(),o.baolist=[o.manageWindow.bao1,o.manageWindow.bao2,o.manageWindow.bao3,o.manageWindow.bao4],o.pricelist=[o.manageWindow.gu1,o.manageWindow.gu2,o.manageWindow.gu3,o.manageWindow.gu4],o.colllist=[o.manageWindow.coll1,o.manageWindow.coll2,o.manageWindow.coll3,o.manageWindow.coll4],o}return __extends(i,t),i.prototype.initData=function(){this.proxy.playerInfo.isShowGuide&&this.sendNotification(e.SceneCommand.SHOW_GUIDE),this.proxy.playerInfo.time>0&&(this.chushishezhi(),this.haha())},i.prototype.haha=function(){if(this.manageEvent)this.manageWindow.juese.visible=!1,"有选项"==this.manageEvent.subType||"角色"==this.manageEvent.type?(this.manageWindow.option.visible=!0,this.manageWindow.text2.visible=!1):"小游戏"==this.manageEvent.type?(this.manageWindow.juese.visible=!0,this.manageWindow.option.visible=!1,this.change=__assign({},this.proxy.changeArr.get("53")),this.manageWindow.text2.visible=!1):(this.manageWindow.option.visible=!1,this.manageWindow.text2.visible=!0,this.change=__assign({},this.proxy.changeArr.get(this.manageEvent.Column9.toString()))),"药不然"==this.manageEvent.subType?(this.manageWindow.juese.visible=!0,this.manageWindow.juese.source="s60"):"木户加奈"==this.manageEvent.subType?(this.manageWindow.juese.visible=!0,this.manageWindow.juese.source="s17"):"黄烟烟"==this.manageEvent.subType?(this.manageWindow.juese.visible=!0,this.manageWindow.juese.source="s99"):"山水"==this.manageEvent.subType&&(this.manageWindow.juese.visible=!0,this.manageWindow.juese.source="s18");else{var t=0;this.manageWindow.option.visible=!1,this.manageWindow.text2.visible=!1,this.manageWindow.text1.text="今天的古董店已经打烊，可以点返回到剧情模式。",this.proxy.playerInfo.guPrice[this.suiji(0,3)]*=4;for(var i=0;4>i;i++)this.proxy.playerInfo.guPrice[i]*=.5,this.proxy.playerInfo.guPrice[i]=Math.floor(this.proxy.playerInfo.guPrice[i]+.5),this.proxy.playerInfo.guPrice[i]<=0&&(this.proxy.playerInfo.guPrice[i]=1),this.numberbilibili(this.pricelist[i]),t+=this.proxy.playerInfo.guPrice[i]*this.proxy.playerInfo.guColl[i];var n=void 0;n=150>t?50:t>=150&&t>=250?80:120,this.proxy.goldchange(n),this.sendNotification(e.SceneCommand.SHOW_POPUP,"你获得了"+t+"代币,兑换为"+n+"青豆")}this.manageWindow.gu1.text=this.proxy.playerInfo.guPrice[0].toString(),this.manageWindow.gu2.text=this.proxy.playerInfo.guPrice[1].toString(),this.manageWindow.gu3.text=this.proxy.playerInfo.guPrice[2].toString(),this.manageWindow.gu4.text=this.proxy.playerInfo.guPrice[3].toString(),this.manageWindow.coll1.text=this.proxy.playerInfo.guColl[0].toString(),this.manageWindow.coll2.text=this.proxy.playerInfo.guColl[1].toString(),this.manageWindow.coll3.text=this.proxy.playerInfo.guColl[2].toString(),this.manageWindow.coll4.text=this.proxy.playerInfo.guColl[3].toString(),this.manageWindow.clock.text=this.proxy.playerInfo.time.toString(),this.manageWindow.gold.text=this.proxy.playerInfo.gold||"0",console.log(this.proxy.playerInfo.gold||"0")},i.prototype.yes=function(){1!=this.xuanze?(this.change=__assign({},this.proxy.changeArr.get(this.manageEvent.selectedYes.toString())),this.gaoliang(),this.manageWindow.yes.scaleX=.8,this.manageWindow.yes.scaleY=.8,this.manageWindow.no.scaleX=1,this.manageWindow.no.scaleY=1,this.xuanze=1):(this.nextManageEvent(),this.uiset(!1),this.manageWindow.yes.scaleX=1,this.manageWindow.yes.scaleY=1,this.xuanze=0)},i.prototype.no=function(){2!=this.xuanze?(this.change=__assign({},this.proxy.changeArr.get(this.manageEvent.selectedNo.toString())),this.gaoliang(),this.manageWindow.no.scaleX=.8,this.manageWindow.no.scaleY=.8,this.manageWindow.yes.scaleX=1,this.manageWindow.yes.scaleY=1,this.xuanze=2):(this.nextManageEvent(),this.uiset(!1),this.manageWindow.no.scaleX=1,this.manageWindow.no.scaleY=1,this.xuanze=0)},i.prototype.gaoliang=function(){this.uiset(!1),("所有"==this.change.mubiao1||"所有"==this.change.mubiao2||"随机"==this.change.mubiao1||"随机"==this.change.mubiao2||"随机两种古董"==this.change.mubiao1||"除木器"==this.change.mubiao1||"除玉石"==this.change.mubiao1||"除青铜"==this.change.mubiao1||"除书画"==this.change.mubiao1||"除木器"==this.change.mubiao2||"除玉石"==this.change.mubiao2||"除青铜"==this.change.mubiao2||"除书画"==this.change.mubiao2)&&this.uiset(!0),("书画"==this.change.mubiao1||"玉石"==this.change.mubiao1||"木器"==this.change.mubiao1||"青铜"==this.change.mubiao1)&&(this.baolist[this.gulist.indexOf(this.change.mubiao1)].visible=!0),("书画"==this.change.mubiao2||"玉石"==this.change.mubiao2||"木器"==this.change.mubiao2||"青铜"==this.change.mubiao2)&&(this.baolist[this.gulist.indexOf(this.change.mubiao2)].visible=!0)},i.prototype.uiset=function(e){this.baolist.forEach(function(t){t.visible=e})},i.prototype.uiset2=function(e){this.uiset(!0),this.baolist[this.gulist.indexOf(e)].visible=!1},i.prototype.gogog=function(){var e=this;console.log(this.change);var t=["木器","书画","青铜","玉石"];if("古董数量变化"==this.change.leixing1)if("随机"==this.change.mubiao1){var i=this.suiji(0,3);this.proxy.playerInfo.guColl[i]+=parseInt(this.change.shuzhi1),this.numberbilibili(this.colllist[i])}else if("价值最低"==this.change.mubiao1)this.jiazhipaixu(),this.ary[0]!=this.ary[1]&&(this.proxy.playerInfo.guColl[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]+=parseInt(this.change.shuzhi1),this.numberbilibili(this.colllist[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]));else if("所有"==this.change.mubiao1)for(var n=0;4>n;n++)this.proxy.playerInfo.guColl[n]+=parseInt(this.change.shuzhi1),this.numberbilibili(this.colllist[n]);else if("随机两种古董"==this.change.mubiao1){var o=this.suiji(0,3),a=this.suiji(0,2);a=(o+a)%4,this.proxy.playerInfo.guColl[o]+=2,this.proxy.playerInfo.guColl[a]+=2,this.numberbilibili(this.colllist[o]),this.numberbilibili(this.colllist[a])}else if("每回合"==this.change.mubiao1)this.eachGu+=parseInt(this.change.shuzhi1);else if("特殊1"==this.change.mubiao1){if(this.shuliangpaixu(),this.ary2[0]!=this.ary2[1]){for(var r=this.proxy.playerInfo.guColl.indexOf(this.ary2[0]),s=0,n=0;4>n;n++)this.proxy.playerInfo.guColl[n]*=.5,s+=this.proxy.playerInfo.guColl[n];this.proxy.playerInfo.guColl[r]+=s,this.colllist.forEach(function(t){e.numberbilibili(t)})}}else if("特殊2"==this.change.mubiao1){if(this.shuliangpaixu(),this.ary2[3]>this.ary2[2]){var c=this.proxy.playerInfo.guColl.indexOf(this.ary2[3]),h=this.proxy.playerInfo.guColl[c]/4;this.proxy.playerInfo.guColl[c]=0;for(var n=0;4>n;n++)this.proxy.playerInfo.guColl[n]+=h;this.colllist.forEach(function(t){e.numberbilibili(t)})}}else if("青铜价格最高"==this.change.tiaojian1)this.mmpriceMax(2);else if("青铜数量最多"==this.change.tiaojian1)this.mmNumMax(2);else if("木器价格最高"==this.change.tiaojian1)this.mmpriceMax(0);else if("木器数量最多"==this.change.tiaojian1)this.mmNumMax(0);else if("书画价格最高"==this.change.tiaojian1)this.mmpriceMax(1);else if("书画数量最多"==this.change.tiaojian1)this.mmNumMax(1);else if("玉石价格最高"==this.change.tiaojian1)this.mmpriceMax(3);else if("玉石数量最多"==this.change.tiaojian1)this.mmNumMax(3);else if("随机"==this.change.tiaojian1){for(var u=[0,0,0,0],p=parseInt(this.change.shuzhi1),l=void 0,n=0;3>n;n++)l=Math.random(),u[n]+=Math.round(l*p),p-=u[n];u[3]+=p,console.log(u);for(var n=0;4>n;n++)this.proxy.playerInfo.guColl[n]+=u[n],0!=u[n]&&this.numberbilibili(this.colllist[n])}else this.proxy.playerInfo.guColl[t.indexOf(this.change.mubiao1)]+=parseInt(this.change.shuzhi1),this.numberbilibili(this.colllist[t.indexOf(this.change.mubiao1)]);else if("价格变化"==this.change.leixing1){for(var n=0;4>n;n++)this.proxy.playerInfo.guPrice[n]*=parseFloat(this.change.shuzhi1),n!=t.indexOf(this.change.tiaojian1)&&this.numberbilibili(this.pricelist[n]);this.proxy.playerInfo.guPrice[t.indexOf(this.change.tiaojian1)]/=parseFloat(this.change.shuzhi1)}if("价格变化"==this.change.leixing2)if("随机"==this.change.mubiao2){var d=this.suiji(0,3);this.change.chengyi?this.proxy.playerInfo.guPrice[d]*=parseFloat(this.change.shuzhi2):this.proxy.playerInfo.guPrice[d]+=parseInt(this.change.shuzhi2),this.numberbilibili(this.pricelist[d])}else if("价值最低"==this.change.mubiao2)this.jiazhipaixu(),this.ary[0]!=this.ary[1]&&(this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]+=parseInt(this.change.shuzhi2),this.numberbilibili(this.pricelist[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]));else if("所有"==this.change.mubiao2)for(var n=0;4>n;n++)this.change.chengyi?this.proxy.playerInfo.guPrice[n]*=parseFloat(this.change.shuzhi2):this.proxy.playerInfo.guPrice[n]+=parseInt(this.change.shuzhi2),this.numberbilibili(this.pricelist[n]);else"第一二古董价格"==this.change.mubiao2?(this.jiazhipaixu(),this.ary[1]!=this.ary[2]&&(this.change.chengyi?(this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[1])]*=parseFloat(this.change.shuzhi2),this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]*=parseFloat(this.change.shuzhi2)):(this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[1])]+=parseInt(this.change.shuzhi2),this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]+=parseInt(this.change.shuzhi2)),this.numberbilibili(this.pricelist[this.proxy.playerInfo.guPrice.indexOf(this.ary[1])]),this.numberbilibili(this.pricelist[this.proxy.playerInfo.guPrice.indexOf(this.ary[0])]))):"第三四古董价格"==this.change.mubiao2?(this.jiazhipaixu(),this.ary[1]!=this.ary[2]&&(this.change.chengyi?(this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[2])]*=parseFloat(this.change.shuzhi2),this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[3])]*=parseFloat(this.change.shuzhi2)):(this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[2])]+=parseInt(this.change.shuzhi2),this.proxy.playerInfo.guPrice[this.proxy.playerInfo.guPrice.indexOf(this.ary[3])]+=parseInt(this.change.shuzhi2)),this.numberbilibili(this.pricelist[this.proxy.playerInfo.guPrice.indexOf(this.ary[2])]),this.numberbilibili(this.pricelist[this.proxy.playerInfo.guPrice.indexOf(this.ary[3])]))):(this.change.chengyi?this.proxy.playerInfo.guPrice[t.indexOf(this.change.mubiao2)]*=parseFloat(this.change.shuzhi2):this.proxy.playerInfo.guPrice[t.indexOf(this.change.mubiao2)]+=parseInt(this.change.shuzhi2),this.numberbilibili(this.pricelist[t.indexOf(this.change.mubiao2)]));else if("回合变化"==this.change.leixing2)this.proxy.playerInfo.time-=parseInt(this.change.shuzhi2),this.numberbilibili(this.manageWindow.clock);else if("古董数量变化"==this.change.leixing2)if("五回合"==this.change.tiaojian2)this.five[t.indexOf(this.change.mubiao2)]=5;else{for(var n=0;4>n;n++)this.proxy.playerInfo.guColl[n]+=parseInt(this.change.shuzhi2),n!=t.indexOf(this.change.tiaojian2)&&this.numberbilibili(this.colllist[n]);this.proxy.playerInfo.guColl[t.indexOf(this.change.tiaojian2)]-=parseInt(this.change.shuzhi2)}this.shuzhijiance()},i.prototype.numberbilibili=function(e){e&&(egret.Tween.get(e).to({alpha:.5},500),egret.Tween.get(e).to({scaleX:.5,scaleY:.5},500),egret.setTimeout(function(){egret.Tween.get(e).to({alpha:1},500),egret.Tween.get(e).to({scaleX:2,scaleY:2},500)},this,600),egret.setTimeout(function(){egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},500)},this,1200))},i.prototype.shuzhijiance=function(){for(var e=0;4>e;e++)this.proxy.playerInfo.guPrice[e]=Math.floor(this.proxy.playerInfo.guPrice[e]+.5),this.proxy.playerInfo.guColl[e]=Math.floor(this.proxy.playerInfo.guColl[e]+.5),this.proxy.playerInfo.guPrice[e]<=0&&(this.proxy.playerInfo.guPrice[e]=1),this.proxy.playerInfo.guColl[e]<0&&(this.proxy.playerInfo.guColl[e]=0)},i.prototype.mmpriceMax=function(e){this.jiazhipaixu(),this.ary[3]!=this.ary[2]&&this.proxy.playerInfo.guPrice[e]==this.ary[3]&&(this.proxy.playerInfo.guColl[e]+=5,this.numberbilibili(this.colllist[e]))},i.prototype.mmNumMax=function(e){this.shuliangpaixu(),this.ary2[3]!=this.ary2[2]&&this.proxy.playerInfo.guColl[e]==this.ary2[3]&&(this.proxy.playerInfo.guColl[e]*=1.5,this.numberbilibili(this.colllist[e]))},i.prototype.jiazhipaixu=function(){for(var e=0;4>e;e++)this.ary[e]=this.proxy.playerInfo.guPrice[e];this.ary.sort(function(e,t){return e-t})},i.prototype.shuliangpaixu=function(){for(var e=0;4>e;e++)this.ary2[e]=this.proxy.playerInfo.guColl[e];this.ary2.sort(function(e,t){return e-t})},i.prototype.chushi=function(e){for(var t,i=e,n=0;3>n;n++)t=Math.random(),this.shuzu[n]+=Math.round(t*i),i-=this.shuzu[n],i++;this.shuzu[3]+=i},i.prototype.suiji=function(e,t){var i=t-e,n=Math.random();return e+Math.round(n*i)},i.prototype.chushishezhi=function(){for(var e=this,t=0,i=0;4>i;i++)t+=this.proxy.playerInfo.guPrice[i];if(0==t&&24==this.proxy.playerInfo.time){this.chushi(this.zongjiazhi-4);for(var i=0;4>i;i++)this.proxy.playerInfo.guPrice[i]=this.shuzu[i]}this.proxy.playerInfo.guEventList.length?this.manageEvent=this.proxy.manageEventArr.find(function(t){return t.id==e.proxy.playerInfo.guEventList[e.proxy.playerInfo.guEventList.length-1]||t.subType==e.proxy.playerInfo.guEventList[e.proxy.playerInfo.guEventList.length-1]}):this.manageEvent=this.proxy.getRandomManageEvent(),console.log(this.manageEvent),this.setManageEvent()},i.prototype.setManageEvent=function(){if(this.manageWindow.miniGameGroup.visible=this.manageWindow.setMiniGame.visible=!1,this.manageWindow.text1.y=800,this.manageEvent)if(this.manageWindow.eventGroup.visible=!0,console.log(this.manageEvent.type,this.manageEvent.subType),this.manageWindow.description="",this.manageWindow.yes_text=this.manageEvent.yes,this.manageWindow.no_text=this.manageEvent.no,"小游戏"==this.manageEvent.type){switch(this.manageEvent.subType){case"猜真假":this.manageWindow.juese.source="s8",this.manageWindow.description="店家，来看看这几件宝贝，祖传的。你看看能给多少钱，不保证真假啊~";break;case"找不同":this.manageWindow.juese.source="s21",this.manageWindow.description="呀，路上捡了几件宝贝，您给看看哪件能收给个价？";break;case"找相同":this.manageWindow.juese.source="s22",this.manageWindow.description="给你件古董，你要是能鉴定出它是真的，票子大大的赏！";break;case"找同类":this.manageWindow.juese.source="s24",this.manageWindow.description="嗨，从老家里的破柜子里翻出一件老物件，您给看看它是什么古董？";break;case"找异类":this.manageWindow.juese.source="s30",this.manageWindow.description="老大让我给你带句话，要是这宝贝你鉴定不出是假的，这店别想开了！"}this.manageWindow.juese.visible=this.manageWindow.setMiniGame.visible=!0}else this.manageWindow.description=this.manageEvent.description},i.prototype.setMiniGame=function(){var t=this;if(this.canSelectedCard=this.manageWindow.eventGroup.visible=this.manageWindow.setMiniGame.visible=!1,this.manageWindow.miniGameGroup.visible=!0,this.selectedImg=[],this.manageWindow.gameTrueFalse.visible=this.manageWindow.gameList.visible=!1,this.manageWindow.gameTrueFalse.removeChildren(),this.manageWindow.description=this.manageEvent.description,this.manageWindow.text1.y=1020,"猜真假"==this.manageEvent.subType){this.manageWindow.gameTrueFalse.visible=!0,this.manageWindow.eventGroup.visible=!1,this.trueAndFalseUIList=[],this.trueFalseList=[!0,!0,!0,!0,!0,!0,!0,!0,!0],this.falseIndexList=[];
for(var i=0;3>i;i++){var n=_.random(3*i,3*i+2);this.trueFalseList[n]=!1,this.falseIndexList.push(n)}this.trueFalseList.forEach(function(e,i){var n=new eui.Image;n.source="manage-card2",n.name="img";var o=new eui.Label;o.text=e?"真":"假",o.size=60,o.horizontalCenter=0,o.verticalCenter=0;var a=new eui.Group;a.addChild(n),a.addChild(o),a.name=i.toString(),a.x=i%3?215*(i%3):0,a.y=(i-i%3)/3?280*((i-i%3)/3):0,t.manageWindow.gameTrueFalse.addChild(a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,t.trueFalseSelect,t),t.trueAndFalseUIList.push(a)}),egret.setTimeout(function(){t.moveCards()},this,3e3)}else{this.gameImgList=[],this.answerImgList=[],this.manageWindow.gameList.visible=!0;var o=["qingtong","shuhua","muqi","ciqi","yu"],a=_.random(0,4),r=[4,5,6],n=_.random(0,2),s=_.random(1,8);switch(this.manageEvent.subType){case"找不同":for(var i=0;4>i;i++)if(i==n)this.gameImgList.push({res:o[a]+"("+r[i]+")",isSelected:!1}),this.answerImgList.push(o[a]+"("+r[i]+")");else{var c=(1+n)%3;this.gameImgList.push({res:o[a]+"("+r[c]+")",isSelected:!1})}break;case"找相同":this.gameImgList=r.map(function(e){return{res:o[a]+"("+e+")",isSelected:!1}}),this.gameImgList.push({res:o[a]+"("+r[n]+")",isSelected:!1}),this.answerImgList.push(o[a]+"("+r[n]+")",o[a]+"("+r[n]+")");break;case"找同类":this.gameImgList.push({res:o[a]+"("+s+")",isSelected:!1},{res:o[a]+"("+((a+s)%8+1)+")",isSelected:!1}),this.answerImgList.push(o[a]+"("+s+")",o[a]+"("+((a+s)%8+1)+")");for(var h=_.random(0,4);h==a;)h=_.random(0,4);for(var u=_.random(0,4);u==a||u==h;)u=_.random(0,4);this.gameImgList.push({res:o[h]+"("+((u+s)%8+1)+")",isSelected:!1},{res:o[u]+"("+((h+s)%8+1)+")",isSelected:!1});break;case"找异类":var p=_.random(0,3);this.gameImgList=[0,1,2,3].map(function(e){var i=null;if(e==p){for(var n=_.random(0,4);n==a;)n=_.random(0,4);i={res:o[n]+"("+s+")",isSelected:!1},t.answerImgList.push(o[n]+"("+s+")")}else i={res:o[a]+"("+((a+s+e)%8+1)+")",isSelected:!1};return i})}this.gameImgList.forEach(function(e,t){e.index=t}),this.manageWindow.gameList.dataProvider=new eui.ArrayCollection(this.gameImgList),this.manageWindow.gameList.itemRenderer=e.ManageGameItemRenderer,this.canSelectedCard=!0}},i.prototype.selectItem=function(){var e=this;if(egret.Bitmap,this.canSelectedCard){if(this.gameImgList.forEach(function(t){if(t.index==e.manageWindow.gameList.selectedItem.index)if(t.isSelected=!t.isSelected,t.isSelected)e.selectedImg.push(t);else{var i=e.selectedImg.findIndex(function(e){return t.index==e.index});e.selectedImg.splice(i,1)}}),this.selectedImg.length>this.answerImgList.length){var t=this.selectedImg.shift();this.gameImgList.find(function(e){return e.index==t.index}).isSelected=!1}var i=!0;this.selectedImg.length==this.answerImgList.length&&(this.selectedImg.forEach(function(t){e.answerImgList.includes(t.res)||(i=!1)}),this.setGameReward(i)),console.log(i,this.selectedImg,this.answerImgList)}},i.prototype.trueFalseSelect=function(e){if(this.canSelectedCard){var t=e.currentTarget.getChildByName("img");e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.trueFalseSelect,this),console.log(t.name),t.source="manage-card2",e.currentTarget.addChildAt(t,0),this.selectedImg.push(this.trueFalseList[e.currentTarget.name]),2==this.selectedImg.length&&(this.selectedImg.includes(!0)?this.setGameReward(!1):this.setGameReward(!0))}},i.prototype.setGameReward=function(e){var t=this;this.canSelectedCard=!1;var i=new eui.Image;if(i.source=e?"manage-right":"manage-errer",i.top=50,i.horizontalCenter=0,i.alpha=0,this.manageWindow.miniGameGroup.addChild(i),egret.Tween.get(i).to({alpha:1},1e3).call(function(){t.manageWindow.miniGameGroup.removeChild(i),t.nextManageEvent()}),e){var n=[];"找不同"==this.manageEvent.subType?n=[2,1,1,1]:"找相同"==this.manageEvent.subType?n=[1,2,1,1]:"找同类"==this.manageEvent.subType?n=[1,1,2,1]:"找异类"==this.manageEvent.subType?n=[2,1,1,2]:"猜真假"==this.manageEvent.subType&&(n=[3,3,3,3]),n.forEach(function(e,i){t.proxy.playerInfo.guColl[i]+=e}),this.colllist.forEach(function(e){t.numberbilibili(e)})}},i.prototype.moveCards=function(){var e=this;this.trueAndFalseUIList.forEach(function(e){var t=e.getChildByName("img");e.addChild(t),egret.Tween.get(t).to({scaleX:.5},500).call(function(){t.source="manage-card1",egret.Tween.get(t).to({scaleX:1},500)})}),egret.setTimeout(function(){e.transferCards(5)},this,1e3)},i.prototype.transferCards=function(e){var t=this;if(1>e)return void(this.canSelectedCard=!0);for(var i=e-1,n=this.falseIndexList[_.random(0,2)],o=_.random(0,8);n==o;)o=_.random(0,8);var a=this.trueAndFalseUIList[n].x,r=this.trueAndFalseUIList[n].y,s=this.trueAndFalseUIList[o].x,c=this.trueAndFalseUIList[o].y;this.manageWindow.gameTrueFalse.addChild(this.trueAndFalseUIList[n]),this.manageWindow.gameTrueFalse.addChild(this.trueAndFalseUIList[o]),egret.Tween.get(this.trueAndFalseUIList[n]).to({x:s,y:c},700),egret.Tween.get(this.trueAndFalseUIList[o]).to({x:a,y:r},700).call(function(){t.transferCards(i)})},i.prototype.nextManageEvent=function(){this.gogog(),this.fivehaha(),this.proxy.playerInfo.time--;var e=this.suiji(0,3);this.proxy.playerInfo.guColl[e]+=this.eachGu,0!=this.eachGu&&this.numberbilibili(this.colllist[e]),this.manageEvent=this.proxy.getRandomManageEvent(),this.setManageEvent(),this.manageWindow.text2.visible=!0,this.haha()},i.prototype.fivehaha=function(){for(var e=0;4>e;e++)this.five[e]--,0==this.five[e]&&(this.proxy.playerInfo.guColl[e]-=10,this.numberbilibili(this.colllist[e]));this.shuzhijiance()},i.prototype.btnPlotClick=function(){this.sendNotification(e.SceneCommand.CHANGE,e.Scene.Game)},i.prototype.pictClick=function(){this.sendNotification(e.SceneCommand.SHOW_SCENE)},Object.defineProperty(i.prototype,"manageWindow",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="ManageWindowMediator",i}(puremvc.Mediator);e.ManageWindowMediator=t,__reflect(t.prototype,"ap.ManageWindowMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return n.selectedList=[],t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.cubeStop.buttonList.addEventListener(eui.ItemTapEvent.ITEM_TAP,n.selectItem,n),n.cubeStop.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.dataList=[{name:"一",img:"m20_1",isSelected:!1},{name:"一",img:"m20_2",isSelected:!1},{name:"一",img:"m20_3",isSelected:!1},{name:"一",img:"m20_4",isSelected:!1},{name:"一",img:"m20_5",isSelected:!1},{name:"一",img:"m20_6",isSelected:!1},{name:"一",img:"m20_7",isSelected:!1},{name:"一",img:"m20_8",isSelected:!1},{name:"一",img:"m20_9",isSelected:!1}],this.cubeStop.buttonList.dataProvider=new eui.ArrayCollection(this.dataList),this.cubeStop.buttonList.itemRenderer=e.CubeStopItemRenderer,[2]})})},i.prototype.selectItem=function(){console.log(this.cubeStop.buttonList.selectedItem);var t=this.cubeStop.buttonList.selectedItem,i=this.dataList.find(function(e){return e.img==t.img}),n=this.dataList.findIndex(function(e){return e.img==t.img});i.isSelected=!i.isSelected,9>n+3&&(this.dataList[n+3].isSelected=!this.dataList[n+3].isSelected),n-3>=0&&(this.dataList[n-3].isSelected=!this.dataList[n-3].isSelected),n%3!=2&&(this.dataList[n+1].isSelected=!this.dataList[n+1].isSelected),n%3!=0&&(this.dataList[n-1].isSelected=!this.dataList[n-1].isSelected),this.cubeStop.buttonList.dataProvider=new eui.ArrayCollection(this.dataList),this.cubeStop.buttonList.itemRenderer=e.CubeStopItemRenderer},i.prototype.setResult=function(){this.dataList.find(function(e){return!e.isSelected})?(this.sendNotification(e.GameProxy.REDUCE_POWER),this.initData()):(this.cubeStop.buttonList.touchEnabled=!1,this.cubeStop.buttonList.touchChildren=!1,this.sendNotification(e.GameProxy.PASS_MINIGAME))},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.cubeStop.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.initData();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"cubeStop",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameCubeStopMediator",i}(puremvc.Mediator);e.MiniGameCubeStopMediator=t,__reflect(t.prototype,"ap.MiniGameCubeStopMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return n.selectedList=[],t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.floorSwitch.buttonList.addEventListener(eui.ItemTapEvent.ITEM_TAP,n.selectItem,n),n.floorSwitch.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n,o;return __generator(this,function(a){for(this.dataList=[{name:"虎",img:"m18_1",isSelected:!1},{name:"虎",img:"m18_2",isSelected:!1},{name:"虎",img:"m18_3",isSelected:!1},{name:"蛇",img:"m18_4",isSelected:!1},{name:"蛇",img:"m18_5",isSelected:!1},{name:"狼",img:"m18_6",isSelected:!1},{name:"狼",img:"m18_7",isSelected:!1},{name:"鹰",img:"m18_8",isSelected:!1},{name:"鹰",img:"m18_9",isSelected:!1}],t=this.dataList.length,i=0;t-1>i;i++)n=Math.floor(Math.random()*(t-i)),o=this.dataList[n],this.dataList[n]=this.dataList[t-i-1],this.dataList[t-i-1]=o;return this.floorSwitch.buttonList.dataProvider=new eui.ArrayCollection(this.dataList),this.floorSwitch.buttonList.itemRenderer=e.SwitchItemRenderer,[2]})})},i.prototype.selectItem=function(){var t=this,i=this.floorSwitch.buttonList.selectedItem;if(this.selectedList.find(function(e){return e.img==i.img})){var n=this.selectedList.findIndex(function(e){return e.img==i.img});this.selectedList.splice(n,1)}else this.selectedList.length<3?this.selectedList.push(this.floorSwitch.buttonList.selectedItem):(this.selectedList.shift(),this.selectedList.push(this.floorSwitch.buttonList.selectedItem));this.dataList.forEach(function(e){e.isSelected=!1,t.selectedList.find(function(t){return t.img==e.img})&&(e.isSelected=!0)}),this.floorSwitch.buttonList.dataProvider=new eui.ArrayCollection(this.dataList),this.floorSwitch.buttonList.itemRenderer=e.SwitchItemRenderer},i.prototype.setResult=function(){if(console.log(this.selectedList),3==this.selectedList.length){var t=!this.selectedList.find(function(e){return"虎"!=e.name});t&&(this.floorSwitch.buttonList.touchEnabled=!1,this.floorSwitch.buttonList.touchChildren=!1,this.sendNotification(e.GameProxy.PASS_MINIGAME))}else this.sendNotification(e.GameProxy.REDUCE_POWER),this.initData()},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.floorSwitch.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.initData();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"floorSwitch",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameFloorSwitchMediator",i}(puremvc.Mediator);e.MiniGameFloorSwitchMediator=t,__reflect(t.prototype,"ap.MiniGameFloorSwitchMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameInput.answerInput.addEventListener(egret.FocusEvent.FOCUS_OUT,n.focusOut,n),n.gameInput.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n.initData(),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n;return __generator(this,function(o){for(this.gameInput.answerInput.textDisplay.size=45,this.gameInput.answerInput.text=null,this.inputTextList=[],t=this.gameInput.answer.split("|")[0].length,i=0;t>i;i++)this.inputTextList.push("");return n=new eui.TileLayout,n.horizontalGap=20,n.verticalGap=20,n.orientation="columns",n.requestedColumnCount=7>t?t:4,this.gameInput.inputItemList.layout=n,this.gameInput.inputItemList.dataProvider=new eui.ArrayCollection(this.inputTextList),this.gameInput.inputItemList.itemRenderer=e.InputItemRenderer,[2]})})},i.prototype.focusOut=function(t){var i=this;t.target.text.length>this.inputTextList.length&&(t.target.text=t.target.text.substr(0,this.inputTextList.length)),this.inputTextList=this.inputTextList.map(function(e){return""}),t.target.text.split("").forEach(function(e,t){t<i.inputTextList.length&&(i.inputTextList[t]=e)}),this.gameInput.inputItemList.dataProvider=new eui.ArrayCollection(this.inputTextList),this.gameInput.inputItemList.itemRenderer=e.InputItemRenderer},i.prototype.setResult=function(){var t=this.inputTextList.join(""),i=this.gameInput.answer.split("|"),n=!i.find(function(e){return e==t});n?(this.sendNotification(e.GameProxy.REDUCE_POWER),this.gameInput.answerInput.text=""):this.sendNotification(e.GameProxy.PASS_MINIGAME)},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameInput.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.gameInput.answerInput.text=null,this.inputTextList=this.inputTextList.map(function(e){return""}),this.gameInput.inputItemList.dataProvider=new eui.ArrayCollection(this.inputTextList),this.gameInput.inputItemList.itemRenderer=e.InputItemRenderer;break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameInput",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameInputMediator",i}(puremvc.Mediator);e.MiniGameInputMediator=t,__reflect(t.prototype,"ap.MiniGameInputMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="ApLoadingUI",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.createCompleteEvent,t),t}return __extends(t,e),t.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),this.progressBg.y=this.stage.stageHeight-30,this.progressBar.y=this.stage.stageHeight-30,this.loadingLabel.y=this.stage.stageHeight-60,this.btnLogin.y=this.stage.stageHeight-this.btnLogin.height,this.btnAnonymousLogin.y=this.stage.stageHeight-this.btnLogin.height-this.btnAnonymousLogin.height-20},t.prototype.onProgress=function(e,t){this.labelText.text=e+"/"+t,this.progressBar.width=this.stage.width*e/t},t.prototype.showInformation=function(e){this.loadingText.text=e,this.labelText.text=""},t}(eui.Component);e.ApLoadingUI=t,__reflect(t.prototype,"ap.ApLoadingUI",["RES.PromiseTaskReporter"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.jigsawImgGroupList=[n.gameJigsaw.jigsawImgGroup1,n.gameJigsaw.jigsawImgGroup2,n.gameJigsaw.jigsawImgGroup3,n.gameJigsaw.jigsawImgGroup4],n.jigsawImgGroupList.forEach(function(e){e.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation();var i=!e.getChildByName("jigsawMove").visible;e.getChildByName("border").visible=e.getChildByName("jigsawMove").visible=e.getChildByName("jigsawTrans").visible=i,n.jigsawImgGroupList.forEach(function(e,i){e!=t.currentTarget&&(e.getChildByName("border").visible=e.getChildByName("jigsawMove").visible=e.getChildByName("jigsawTrans").visible=!1)})},n),e.getChildByName("jigsawTrans").addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopImmediatePropagation(),e.getChildByName("border").visible=e.getChildByName("jigsawMove").visible=e.getChildByName("jigsawTrans").visible=!1;var i=e.getChildByName("jigsawImg");i.rotation=i.rotation?0:180},n),e.getChildByName("jigsawMove").addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.touchBegin,n),e.getChildByName("jigsawMove").addEventListener(egret.TouchEvent.TOUCH_MOVE,n.onMove,n),e.getChildByName("jigsawMove").addEventListener(egret.TouchEvent.TOUCH_CANCEL,n.touchReleaseOutside,n),e.getChildByName("jigsawMove").addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,n.touchReleaseOutside,n)}),n.gameJigsaw.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n.initData(),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,o;return __generator(this,function(a){for(e=["m16_1","m16_2","m16_3","m16_4"],t=0;4>t;t++)i=Math.floor(4*Math.random()),n=Math.floor(4*Math.random()),i!=n&&(o=e[i],e[i]=e[n],e[n]=o);return this.jigsawImgGroupList.forEach(function(t,i){var n=t.getChildByName("jigsawImg");n.source=e[i],n.rotation=Math.random()>.5?180:0}),[2]})})},i.prototype.onMove=function(e){e.stopImmediatePropagation(),this.draggedObject.x=e.stageX-this.offsetX,this.draggedObject.y=e.stageY-this.offsetY},i.prototype.touchBegin=function(e){console.log("TOUCH_BEGIN",e.currentTarget.name),e.stopImmediatePropagation(),this.draggedObject=e.currentTarget.parent,this.draggedObject.parent.addChild(this.draggedObject),this.beforeX=this.draggedObject.x,this.beforeY=this.draggedObject.y,this.offsetX=e.stageX-this.draggedObject.x,this.offsetY=e.stageY-this.draggedObject.y,e.currentTarget.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.touchEnd=function(e){var t=this;console.log("TOUCH_END",e.currentTarget.name),e.stopImmediatePropagation(),this.draggedObject&&e.currentTarget.parent==this.draggedObject&&(this.jigsawImgGroupList.forEach(function(e,i){if(t.draggedObject!=e){var n=Math.abs(t.draggedObject.x-e.x),o=Math.abs(t.draggedObject.y-e.y);if(70>o&&70>n){var a=t.draggedObject.getChildByName("jigsawImg"),r=e.getChildByName("jigsawImg");t.draggedObject.addChildAt(r,0),e.addChildAt(a,0)}}}),this.draggedObject.x=this.beforeX,this.draggedObject.y=this.beforeY,e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this))},i.prototype.touchReleaseOutside=function(e){this.draggedObject&&(this.draggedObject.x=this.beforeX,this.draggedObject.y=this.beforeY,this.draggedObject=null)},i.prototype.setResult=function(){var t=!0,i=["m16_1","m16_2","m16_3","m16_4"];this.jigsawImgGroupList.forEach(function(e,n){var o=e.getChildByName("jigsawImg");(o.source!=i[n]||0!=o.rotation)&&(t=!1)}),t?(this.gameJigsaw.touchEnabled=!1,this.gameJigsaw.touchChildren=!1,this.sendNotification(e.GameProxy.PASS_MINIGAME)):(this.sendNotification(e.GameProxy.REDUCE_POWER),this.initData())},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.gameJigsaw.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.initData();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},Object.defineProperty(i.prototype,"gameJigsaw",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameJigsawM16Mediator",i}(puremvc.Mediator);e.MiniGameJigsawM16Mediator=t,__reflect(t.prototype,"ap.MiniGameJigsawM16Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME);var a=[1,0,0,0,100,0,1,0,0,100,0,0,1,0,100,0,0,0,1,0];return o._colorFlilter=new egret.ColorMatrixFilter(a),o.miniGame.btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,o.leftClick,o),o.miniGame.btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,o.rightClick,o),o.miniGame.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,o.confirmClick,o),o.miniGame.btnReset.addEventListener(egret.TouchEvent.TOUCH_TAP,o.initData,o),o.miniGame.btnED.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnEDClick,o),o.miniGame.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,o.btnBackClick,o),o.miniGame.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.initData(),o}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n,o,a=this;return __generator(this,function(r){return this.jigsawNameList=["jigsaw01","jigsaw02","jigsaw03","jigsaw04","jigsaw05"],this.nowIndex=0,t=[0,-45,-90,45,90],this.jigsawNameList.forEach(function(e,i){var n=a.miniGame.jigsawGroup.getChildByName(e);n.rotation=t[i];var o=a.miniGame.jigsawResult.getChildByName(e);o.visible=!1,n.filters=[],o.filters=[]}),i=this.miniGame.jigsawGroup.getChildByName(this.jigsawNameList[this.nowIndex]),n=this.miniGame.jigsawResult.getChildByName(this.jigsawNameList[this.nowIndex]),n.visible||(n.visible=!0),n.rotation=i.rotation,i.filters=[this._colorFlilter],n.filters=[this._colorFlilter],this.miniGame.questionId&&(o=this.facade().retrieveProxy(e.GameProxy.NAME),this.miniGame.question=o.questions.get(this.miniGame.questionId.toString()).question),[2]})})},i.prototype.leftClick=function(){var e=this;if(this.jigsawNameList.forEach(function(t){var i=e.miniGame.jigsawGroup.getChildByName(t);i.rotation=i.rotation+45>180?i.rotation-315:i.rotation+45}),this.jigsawNameList[this.nowIndex]){var t=this.miniGame.jigsawGroup.getChildByName(this.jigsawNameList[this.nowIndex]),i=this.miniGame.jigsawResult.getChildByName(this.jigsawNameList[this.nowIndex]);i.rotation=t.rotation}},i.prototype.rightClick=function(){var e=this;if(this.jigsawNameList.forEach(function(t){var i=e.miniGame.jigsawGroup.getChildByName(t);i.rotation=i.rotation-45<=-180?i.rotation+315:i.rotation-45}),this.jigsawNameList[this.nowIndex]){var t=this.miniGame.jigsawGroup.getChildByName(this.jigsawNameList[this.nowIndex]),i=this.miniGame.jigsawResult.getChildByName(this.jigsawNameList[this.nowIndex]);i.rotation=t.rotation}},i.prototype.confirmClick=function(){if(this.proxy.playerInfo.fatigueValue<=0)return void this.sendNotification(e.SceneCommand.SHOW_POPUP,"没有体力破解谜题了！（体力可在商城购买）");if(this.nowIndex==this.jigsawNameList.length)return void this.setResult();if(this.jigsawNameList[this.nowIndex]){var t=this.miniGame.jigsawGroup.getChildByName(this.jigsawNameList[this.nowIndex]),i=this.miniGame.jigsawResult.getChildByName(this.jigsawNameList[this.nowIndex]);t.filters=[],i.filters=[]}if(this.nowIndex++,this.jigsawNameList[this.nowIndex]){var t=this.miniGame.jigsawGroup.getChildByName(this.jigsawNameList[this.nowIndex]),i=this.miniGame.jigsawResult.getChildByName(this.jigsawNameList[this.nowIndex]);i.visible||(i.visible=!0),i.rotation=t.rotation,t.filters=[this._colorFlilter],i.filters=[this._colorFlilter]}},i.prototype.setResult=function(){var t=this,i=!0,n=[-90,45,-135,180,-45];this.jigsawNameList.forEach(function(e,o){var a=t.miniGame.jigsawResult.getChildByName(e);a.rotation!=n[o]&&(i=!1)}),console.log(i),i?(this.miniGame.touchEnabled=!1,this.miniGame.touchChildren=!1,this.sendNotification(e.GameProxy.PASS_MINIGAME)):(this.sendNotification(e.GameProxy.REDUCE_POWER),this.initData())},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.miniGame.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.initData();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},i.prototype.btnEDClick=function(){this.miniGame.showTipsImg=this.miniGame.btnBack.visible=!0,this.miniGame.btnGroup.visible=this.miniGame.jigsawGroup.visible=!1},i.prototype.btnBackClick=function(){this.miniGame.showTipsImg=this.miniGame.btnBack.visible=!1,this.miniGame.btnGroup.visible=this.miniGame.jigsawGroup.visible=!0},Object.defineProperty(i.prototype,"miniGame",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameM42Mediator",i}(puremvc.Mediator);e.MiniGameM42Mediator=t,__reflect(t.prototype,"ap.MiniGameM42Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.rightRotationList=[-60,0,60,120,180,-120],n.jigsawNameList=["jigsaw01","jigsaw02","jigsaw03","jigsaw04","jigsaw05","jigsaw06"],n.jigsawNameList.forEach(function(e){var t=n.miniGame.jigsawGroup.getChildByName(e);t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.touchBegin,n),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,n.onMove,n),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,n.touchReleaseOutside,n),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,n.touchReleaseOutside,n)}),n.miniGame.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n.initData(),n}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){return e=[{x:215,y:460},{x:75,y:460},{x:215,y:275},{x:75,y:275},{x:215,y:90},{x:75,y:90}],this.jigsawNameList.forEach(function(i,n){var o=t.miniGame.jigsawGroup.getChildByName(i);o.rotation=.1,o.x=e[n].x,o.y=e[n].y}),[2]})})},i.prototype.onMove=function(e){e.stopImmediatePropagation(),this.draggedObject.x=e.stageX-this.offsetX,this.draggedObject.y=e.stageY-this.offsetY;var t=this.draggedObject.x-515,i=this.draggedObject.y-185;-80>t&&t>-180&&i>-30&&70>i?this.draggedObject.rotation=180:0>t&&t>-130&&i>-180&&-30>i?this.draggedObject.rotation=-120:130>t&&t>0&&i>-180&&-30>i?this.draggedObject.rotation=-60:160>t&&t>60&&i>-30&&100>i?this.draggedObject.rotation=0:100>t&&t>-30&&i>100&&150>i?this.draggedObject.rotation=60:-30>t&&t>-180&&i>70&&150>i&&(this.draggedObject.rotation=120)},i.prototype.touchBegin=function(e){e.stopImmediatePropagation(),this.draggedObject=e.currentTarget,this.draggedObject.parent.addChild(this.draggedObject),this.offsetX=e.stageX-this.draggedObject.x,this.offsetY=e.stageY-this.draggedObject.y,e.currentTarget.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.touchEnd=function(e){e.stopImmediatePropagation(),this.draggedObject&&e.currentTarget==this.draggedObject&&e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this)},i.prototype.setResult=function(){var t=this,i=!0;this.jigsawNameList.forEach(function(e,n){t.miniGame.jigsawGroup.getChildByName(e).rotation!=t.rightRotationList[n]&&(i=!1)}),i?(this.sendNotification(e.GameProxy.PASS_MINIGAME),this.jigsawNameList.forEach(function(e){var i=t.miniGame.jigsawGroup.getChildByName(e);i.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchBegin,t),i.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.onMove,t)})):(this.sendNotification(e.GameProxy.REDUCE_POWER),this.initData())},i.prototype.listNotificationInterests=function(){return[e.GameProxy.RESET_MINIGAME,e.GameProxy.CONFIRM_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();if(this.miniGame.questionId==i)switch(t.getName()){case e.GameProxy.RESET_MINIGAME:this.initData();break;case e.GameProxy.CONFIRM_MINIGAME:this.setResult()}},i.prototype.touchReleaseOutside=function(e){this.draggedObject&&(this.draggedObject=null)},Object.defineProperty(i.prototype,"miniGame",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameM8_2Mediator",i}(puremvc.Mediator);e.MiniGameM8_2Mediator=t,__reflect(t.prototype,"ap.MiniGameM8_2Mediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n}return __extends(i,t),i.prototype.addMiniGameToStage=function(e,t){this.miniGame.clearStage(),this.gameObjPool||(this.gameObjPool={}),this.gameObjPool[t]||(this.gameObjPool[t]=this.getGameDisplayObject(t));try{this.gameObjPool[t].setQuestionId&&this.gameObjPool[t].setQuestionId(e),this.miniGame.addMiniGameObject(this.gameObjPool[t])}catch(i){console.log(i)}},i.prototype.getGameDisplayObject=function(t){var i=null;switch(t){case"地板开关":i=new e.MiniGameFloorSwitch;break;case"魔方停止":i=new e.MiniGameCubeStop;break;case"迷宫":i=new e.MiniGameJigsawM16;break;case"古董组合":i=new e.MiniGameJigsawM08;break;case"拼装分水镜":i=new e.MiniGameM42;break;case"药不然拼古董":i=new e.MiniGameM8_2;break;case"古董组合1":i=new e.M14;break;case"平面魔方":i=new e.M2;break;case"密码锁":i=new e.M3_2;break;case"拼图迷宫":i=new e.M5;break;case"暗号":i=new e.M6;break;case"找到出口":i=new e.M9;break;case"石门机关":i=new e.M24;break;case"旅社求救":i=new e.M15;break;case"铜人":i=new e.M17}return i},i.prototype.listNotificationInterests=function(){return[e.GameProxy.SHOW_MINIGAME]},i.prototype.handleNotification=function(t){var i=t.getBody();switch(t.getName()){case e.GameProxy.SHOW_MINIGAME:this.addMiniGameToStage(i.id,i.keyword)}},Object.defineProperty(i.prototype,"miniGame",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameMediator",i}(puremvc.Mediator);e.MiniGameMediator=t,__reflect(t.prototype,"ap.MiniGameMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return t.prototype.initializeNotifier.call(n,"ApApplicationFacade"),n.gameSelect.buttonList.addEventListener(eui.ItemTapEvent.ITEM_TAP,n.selectItem,n),n.gameSelect.addEventListener(egret.Event.ADDED_TO_STAGE,n.initData,n),n}return __extends(i,t),Object.defineProperty(i.prototype,"selectOptions",{get:function(){return this._selectOptions||(this._selectOptions=new Map(Object.entries(RES.getRes("select-options_json")))),this._selectOptions},enumerable:!0,configurable:!0}),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.optionsItem=this.selectOptions.get(this.gameSelect.optionsId.toString()),this.options=this.optionsItem.options.map(function(e){return{option:e,isSelected:!1}}),this.gameSelect.buttonList.dataProvider=new eui.ArrayCollection(this.options),this.gameSelect.buttonList.itemRenderer=e.QuestionSelectItemRenderer,[2]})})},i.prototype.selectItem=function(){var t=this;this.options.forEach(function(e){e.isSelected=e.option==t.gameSelect.buttonList.selectedItem.option}),this.gameSelect.buttonList.dataProvider=new eui.ArrayCollection(this.options),this.gameSelect.buttonList.itemRenderer=e.QuestionSelectItemRenderer,this.gameSelect.buttonList.selectedItem.option==this.optionsItem.answer&&(this.optionsItem.next?(this.gameSelect.optionsId=this.optionsItem.next,this.initData()):this.sendNotification(e.GameProxy.PASS_MINIGAME))},Object.defineProperty(i.prototype,"gameSelect",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="MiniGameSelectMediator",i}(puremvc.Mediator);e.MiniGameSelectMediator=t,__reflect(t.prototype,"ap.MiniGameSelectMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.initData(),o.guideWindow.btnNext.addEventListener(egret.TouchEvent.TOUCH_TAP,o.next,o),o.guideWindow.btnSkip.addEventListener(egret.TouchEvent.TOUCH_TAP,o.closeWindow,o),o.guideWindow.yes.addEventListener(egret.TouchEvent.TOUCH_TAP,o.yes,o),o.guideWindow.no.addEventListener(egret.TouchEvent.TOUCH_TAP,o.no,o),o}return __extends(i,t),i.prototype.initData=function(){var e=this;this.trueAndFalseUIList=[];for(var t=1;10>t;t++){var i=this.guideWindow.group5.getChildByName("card"+t);this.trueAndFalseUIList.push(i)}[2,4,9].forEach(function(t){var i=e.guideWindow.group5.getChildByName("card"+t);i.addEventListener(egret.TouchEvent.TOUCH_TAP,e.trueFalseSelect,e)}),this._guides=RES.getRes("guide_json"),this._index=0,this.setPage()},i.prototype.setPage=function(){var e=this._guides[this._index];if(e){this.guideWindow.dialogGroup.bottom=0,this.guideWindow.dialogGroup.visible=this.guideWindow.btnNext.visible=this.guideWindow.eventGroup.visible=!0,this.guideWindow.group1.visible=this.guideWindow.group2.visible=this.cannotNext=this.guideWindow.group3.visible=this.guideWindow.group4.visible=this.guideWindow.showAntiEllipse=this.guideWindow.group5.visible=this.guideWindow.moneyGroup.visible=this.guideWindow.antiGroup.visible=this.guideWindow.clockGroup.visible=this.guideWindow.optionGroup.visible=this.guideWindow.btnPlotGroup.visible=!1;
var t=(new egret.HtmlTextParser).parser(e.content);switch(this.guideWindow.dialog.textFlow=t,this.guideWindow.dialogImg="",e.type){case"图片":"guide-img1"==e.content&&(this.guideWindow.moneyGroup.visible=!0),this.guideWindow.dialogImg=e.content,this.guideWindow.dialog.textFlow=null;break;case"古董图标":this.guideWindow.bao1.visible=this.guideWindow.bao2.visible=this.guideWindow.bao3.visible=this.guideWindow.bao4.visible=!1,this.guideWindow.antiGroup.visible=this.guideWindow.showAntiEllipse=!0;break;case"回合图标":this.guideWindow.clockGroup.visible=!0;break;case"找不同":this.guideWindow.eventGroup.visible=!1,this.guideWindow.group1.visible=!0;break;case"找相同":this.guideWindow.eventGroup.visible=!1,this.guideWindow.group2.visible=!0;break;case"找异类":this.guideWindow.eventGroup.visible=!1,this.guideWindow.group3.visible=!0;break;case"找同类":this.guideWindow.eventGroup.visible=!1,this.guideWindow.group4.visible=!0;break;case"真假判别":this.guideWindow.eventGroup.visible=!1,this.trueFalseGame();break;case"剧情图标":this.guideWindow.btnPlotGroup.visible=!0;break;case"好友对话事件":this.showFriend=this.cannotNext=!0}}},i.prototype.closeWindow=function(){this._index=0,this.setPage(),this.proxy.playerInfo.isShowGuide=!1,this.proxy.savePlayerInfoToStorage(),this.guideWindow.close(),this.sendNotification(e.SceneCommand.SHOW_MANAGE)},i.prototype.next=function(){return this.cannotNext?void(this.isTrueFalseGame?(this.guideWindow.dialogGroup.visible=this.isTrueFalseGame=!1,this.guideWindow.btnNext.visible=!1,this.moveCards()):this.showFriend&&(this.guideWindow.dialogGroup.visible=this.isTrueFalseGame=this.guideWindow.btnNext.visible=!1,this.showFriendEvent())):(this._index+=1,void(this._index>this._guides.length?this.closeWindow():this.setPage()))},i.prototype.showFriendEvent=function(){this.guideWindow.antiGroup.visible=this.guideWindow.optionGroup.visible=!0},i.prototype.yes=function(){1!=this.xuanze?(this.guideWindow.bao1.visible=this.guideWindow.bao2.visible=this.guideWindow.bao3.visible=this.guideWindow.bao4.visible=!0,this.guideWindow.yes.scaleX=.8,this.guideWindow.yes.scaleY=.8,this.guideWindow.no.scaleX=1,this.guideWindow.no.scaleY=1,this.xuanze=1):(this.guideWindow.yes.scaleX=1,this.guideWindow.yes.scaleY=1,this.xuanze=0,this.guideWindow.gu1.text="7",this.guideWindow.gu2.text="6",this.guideWindow.gu3.text="9",this.guideWindow.gu4.text="7",this.guideWindow.coll1.text="2",this.guideWindow.coll2.text="4",this.guideWindow.coll3.text="6",this.guideWindow.coll4.text="5",this.cannotNext=!1,this.next())},i.prototype.no=function(){2!=this.xuanze?(this.guideWindow.bao1.visible=this.guideWindow.bao2.visible=this.guideWindow.bao3.visible=this.guideWindow.bao4.visible=!0,this.guideWindow.no.scaleX=.8,this.guideWindow.no.scaleY=.8,this.guideWindow.yes.scaleX=1,this.guideWindow.yes.scaleY=1,this.xuanze=2):(this.guideWindow.no.scaleX=1,this.guideWindow.no.scaleY=1,this.xuanze=0,this.guideWindow.gu1.text="3",this.guideWindow.gu2.text="6",this.guideWindow.gu3.text="4",this.guideWindow.gu4.text="7",this.guideWindow.coll1.text="2",this.guideWindow.coll2.text="3",this.guideWindow.coll3.text="2",this.guideWindow.coll4.text="5",this.cannotNext=!1,this.next())},i.prototype.trueFalseGame=function(){this.guideWindow.group5.visible=this.cannotNext=this.isTrueFalseGame=!0,this.canSelectedCard=!1,this.trueAndFalseUIList.forEach(function(e){var t=e.getChildByName("img");t.source="manage-card2",e.addChildAt(t,0)})},i.prototype.moveCards=function(){var e=this;this.trueAndFalseUIList.forEach(function(e){var t=e.getChildByName("img");e.addChild(t),egret.Tween.get(t).to({scaleX:.5},500).call(function(){t.source="manage-card1",egret.Tween.get(t).to({scaleX:1},500)})}),egret.setTimeout(function(){e.transferCards(5)},this,1e3)},i.prototype.transferCards=function(e){var t=this;if(1>e)return this.canSelectedCard=!0,void[2,4,9].forEach(function(e){var i=t.guideWindow.group5.getChildByName("card"+e);egret.Tween.get(i,{loop:!0}).to({scaleX:.9,scaleY:.9},500).to({scaleX:1,scaleY:1},500)});for(var i=e-1,n=_.random(0,8),o=_.random(0,8);n==o;)o=_.random(0,8);var a=this.trueAndFalseUIList[n].x,r=this.trueAndFalseUIList[n].y,s=this.trueAndFalseUIList[o].x,c=this.trueAndFalseUIList[o].y;this.guideWindow.group5.addChild(this.trueAndFalseUIList[n]),this.guideWindow.group5.addChild(this.trueAndFalseUIList[o]),egret.Tween.get(this.trueAndFalseUIList[n]).to({x:s,y:c},800),egret.Tween.get(this.trueAndFalseUIList[o]).to({x:a,y:r},800).call(function(){t.transferCards(i)})},i.prototype.trueFalseSelect=function(e){var t=this;if(this.canSelectedCard){egret.Tween.removeTweens(e.currentTarget);var i=e.currentTarget.getChildByName("img");i.source="manage-card2",e.currentTarget.addChildAt(i,0),this.clickTime=this.clickTime?this.clickTime+1:1,2==this.clickTime&&(egret.Tween.removeAllTweens(),egret.setTimeout(function(){0==t.clickTime,t.cannotNext=!1,t.guideWindow.btnNext.visible=!0,t.next()},this,300))}},Object.defineProperty(i.prototype,"guideWindow",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="NewPlayerGuideMediator",i}(puremvc.Mediator);e.NewPlayerGuideMediator=t,__reflect(t.prototype,"ap.NewPlayerGuideMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.sceneDetailsWindow.sceneList.addEventListener(eui.ItemTapEvent.ITEM_TAP,o.previewClick,o),o.sceneDetailsWindow.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,o.backClick,o),o.sceneDetailsWindow.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.initData(),o}return __extends(i,t),i.prototype.initData=function(){var t=this,i=this.proxy.sceneRes.get(this.sceneDetailsWindow.type).map(function(i){var n=__assign({},i);return t.proxy.playerInfo.collectedScenes.includes(i.res.replace("S","s"))?(n.isCollected=!0,n.type==e.SceneType.ScenePerson||"s56"==n.res?n.scale=.25:n.scale=.42):(n.isCollected=!1,n.res="not-get",n.name="未获得",n.scale=1),n});this.sceneDetailsWindow.collectedText=i.filter(function(e){return e.isCollected}).length+"/"+i.length,i.sort(function(e,t){return e.isCollected?-1:t.isCollected?1:0}),this.sceneDetailsWindow.sceneList.dataProvider=new eui.ArrayCollection(i),this.sceneDetailsWindow.sceneList.itemRenderer=e.SceneDetailsItemRenderer},i.prototype.backClick=function(){this.sceneDetailsWindow.close()},i.prototype.previewClick=function(){var t=this.sceneDetailsWindow.sceneList.selectedItem;if(t.isCollected){var i=[e.Constants.ResourceEndpoint+"resource/assets/scene/"+t.res+"."+(this.sceneDetailsWindow.type==e.SceneType.SceneBg?"jpg":"png")];e.platform.showPreImage(i)}},i.prototype.listNotificationInterests=function(){return[]},i.prototype.handleNotification=function(e){e.getBody();e.getName()},Object.defineProperty(i.prototype,"sceneDetailsWindow",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="SceneDetailsWindowMediator",i}(puremvc.Mediator);e.SceneDetailsWindowMediator=t,__reflect(t.prototype,"ap.SceneDetailsWindowMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.loadResGroup(),o.sceneSummaryWindow.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,o.backClick,o),o.sceneSummaryWindow.btnSceneBg.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){o.sendNotification(e.SceneCommand.SHOW_SCENE_DETAILS,e.SceneType.SceneBg)},o),o.sceneSummaryWindow.btnScenePerson.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){o.sendNotification(e.SceneCommand.SHOW_SCENE_DETAILS,e.SceneType.ScenePerson)},o),o.sceneSummaryWindow.btnSceneProps.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){o.sendNotification(e.SceneCommand.SHOW_SCENE_DETAILS,e.SceneType.SceneProps)},o),o.sceneSummaryWindow.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.initData(),o}return __extends(i,t),i.prototype.loadResGroup=function(){for(var e=this.proxy.chapterPlot.get(this.proxy.playerInfo.plotId.toString()).chapter,t=e;t>=0;t--)try{RES.loadGroup("chapter"+t,0)}catch(i){console.log(i)}},i.prototype.initData=function(){var t=RES.getRes("scene_json");this.sceneSummaryWindow.collectedText=this.proxy.playerInfo.collectedScenes.length+"/"+t.length,this.sceneSummaryWindow.finishText=this.proxy.playerInfo.ending.length+"/"+e.PlotEnding.length},i.prototype.backClick=function(){this.sceneSummaryWindow.close()},i.prototype.listNotificationInterests=function(){return[]},i.prototype.handleNotification=function(e){e.getBody();e.getName()},Object.defineProperty(i.prototype,"sceneSummaryWindow",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="SceneSummaryWindowMediator",i}(puremvc.Mediator);e.SceneSummaryWindowMediator=t,__reflect(t.prototype,"ap.SceneSummaryWindowMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.settingWindow.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.settingWindow.music.addEventListener(egret.TouchEvent.TOUCH_TAP,o.music,o),o.settingWindow.sound.addEventListener(egret.TouchEvent.TOUCH_TAP,o.sound,o),o.initData(),o}return __extends(i,t),i.prototype.initData=function(){},i.prototype.music=function(){this.proxy.playerInfo.music=this.proxy.playerInfo.music?!1:!0,this.settingWindow.music_icon.source=this.proxy.playerInfo.music?"music_open":"music_close",this.settingWindow.music_text.source=this.proxy.playerInfo.music?"text_open":"text_close"},i.prototype.sound=function(){this.proxy.playerInfo.sound=this.proxy.playerInfo.sound?!1:!0,this.settingWindow.sound_icon.source=this.proxy.playerInfo.sound?"sound_open":"sound_close",this.settingWindow.sound_text.source=this.proxy.playerInfo.sound?"text_open":"text_close"},Object.defineProperty(i.prototype,"settingWindow",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="SettingWindowMediator",i}(puremvc.Mediator);e.SettingWindowMediator=t,__reflect(t.prototype,"ap.SettingWindowMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.shop_list.pay.addEventListener(egret.TouchEvent.TOUCH_TAP,o.haha,o),o}return __extends(i,t),i.prototype.haha=function(){this.sendNotification(i.HAHAHAH,this.shop_list.data)},Object.defineProperty(i.prototype,"shop_list",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="shop_listMediator",i.HAHAHAH="hahahah",i}(puremvc.Mediator);e.shop_listMediator=t,__reflect(t.prototype,"ap.shop_listMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.startScreen.btnResumeGame.addEventListener(egret.TouchEvent.TOUCH_TAP,o.entryGame,o),o.startScreen.btnNewGame.addEventListener(egret.TouchEvent.TOUCH_TAP,o.newGame,o),o.startScreen.btnManage.addEventListener(egret.TouchEvent.TOUCH_TAP,o.showManage,o),o.startScreen.btnDev.addEventListener(egret.TouchEvent.TOUCH_TAP,o.showDeveloper,o),o.startScreen.btnPicture.addEventListener(egret.TouchEvent.TOUCH_TAP,o.pictClick,o),o.startScreen.btnStore.addEventListener(egret.TouchEvent.TOUCH_TAP,o.storeClick,o),o.startScreen.btnShare.addEventListener(egret.TouchEvent.TOUCH_TAP,o.shareClick,o),o.startScreen.btnSetting.addEventListener(egret.TouchEvent.TOUCH_TAP,o.settingClick,o),o.startScreen.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.initData(),o}return __extends(i,t),i.prototype.initData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.proxy.getPlayerInfoFromStorage()];case 1:return e.sent(),this.startScreen.btnResumeGame.visible=1!=this.proxy.playerInfo.plotId?!0:!1,this.startScreen.btnManage.visible=this.proxy.playerInfo.isManage,this.startScreen.no_manage.visible=!this.proxy.playerInfo.isManage,[2]}})})},i.prototype.entryGame=function(){this.sendNotification(e.SceneCommand.CHANGE,e.Scene.Game)},i.prototype.newGame=function(){var t=this;if(1!=this.proxy.playerInfo.plotId){var i={msg:"你的进度将会被重置，是否确认开始新的游戏？",hasCancel:!0,cbk:function(){t.proxy.resetGame(),t.sendNotification(e.SceneCommand.CHANGE,e.Scene.Game)}};this.sendNotification(e.SceneCommand.SHOW_POPUP,i)}else this.sendNotification(e.SceneCommand.CHANGE,e.Scene.Game)},i.prototype.showManage=function(){this.proxy.playerInfo.time?this.sendNotification(e.SceneCommand.SHOW_MANAGE):this.sendNotification(e.SceneCommand.SHOW_POPUP,"经营模式每日只能完成一次，今日经营模式已完成！")},i.prototype.showDeveloper=function(){this.sendNotification(e.SceneCommand.SHOW_DEVE)},i.prototype.pictClick=function(){this.sendNotification(e.SceneCommand.SHOW_SCENE)},i.prototype.storeClick=function(){this.sendNotification(e.SceneCommand.SHOW_STORE)},i.prototype.shareClick=function(){e.platform.shareAppMessage(e.Constants.gameTitle,e.Constants.shareImageUrl)},i.prototype.settingClick=function(){this.sendNotification(e.SceneCommand.SHOW_SETTING)},i.prototype.listNotificationInterests=function(){return[e.GameScreenMediator.manage_show]},i.prototype.handleNotification=function(t){t.getBody();switch(t.getName()){case e.GameScreenMediator.manage_show:this.startScreen.no_manage.visible=!1,this.startScreen.btnManage.visible=!0}},Object.defineProperty(i.prototype,"startScreen",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="StartScreenMediator",i}(puremvc.Mediator);e.StartScreenMediator=t,__reflect(t.prototype,"ap.StartScreenMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(n){var o=t.call(this,i.NAME,n)||this;return t.prototype.initializeNotifier.call(o,"ApApplicationFacade"),o.proxy=o.facade().retrieveProxy(e.GameProxy.NAME),o.storeWindow.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,o.backClick,o),o.storeWindow.addEventListener(egret.Event.ADDED_TO_STAGE,o.initData,o),o.initData(),o}return __extends(i,t),i.prototype.initData=function(){var t=RES.getRes("shop_json"),i=new eui.ArrayCollection(t);this.storeWindow.shoplist.dataProvider=i,this.storeWindow.shoplist.itemRenderer=e.shop_list,this.storeWindow.gold.text=this.proxy.playerInfo.gold||"0"},i.prototype.backClick=function(){this.storeWindow.close()},i.prototype.listNotificationInterests=function(){return[e.shop_listMediator.HAHAHAH]},i.prototype.handleNotification=function(t){var i=t.getBody();switch(t.getName()){case e.shop_listMediator.HAHAHAH:this.haha(i)}},i.prototype.haha=function(t){var i=Number(this.storeWindow.gold.text),n=Number(t.money);i>=n?(i-=n,this.proxy.playerInfo.gold=i.toString(),this.proxy.goldchange(0),this.storeWindow.gold.text=this.proxy.playerInfo.gold,t.tili?this.proxy.playerInfo.fatigueValue+=t.tili:4==t.id?this.proxy.playerInfo.hints+=1:t.point&&(this.proxy.playerInfo.pointHunag+=t.point,this.proxy.playerInfo.pointMu-=t.point),this.sendNotification(e.SceneCommand.SHOW_POPUP,t.effect)):(this.storeWindow.note.visible=!0,egret.setTimeout(this.close_note,this,1500))},i.prototype.close_note=function(){this.storeWindow.note.visible=!1},Object.defineProperty(i.prototype,"storeWindow",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.NAME="StoreWindowMediator",i}(puremvc.Mediator);e.StoreWindowMediator=t,__reflect(t.prototype,"ap.StoreWindowMediator",["puremvc.IMediator","puremvc.INotifier"])}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="CubeStopItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.img=this.data.isSelected?this.data.img:"m20_0"},t}(eui.ItemRenderer);e.CubeStopItemRenderer=t,__reflect(t.prototype,"ap.CubeStopItemRenderer")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.skinName="DeveloperWindow",i.appVersion=e.platform.appVersion,i.addEventListener(eui.UIEvent.CREATION_COMPLETE,i.createCompleteEvent,i),i}return __extends(i,t),i.prototype.createCompleteEvent=function(e){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this)},i}(eui.Panel);e.DeveloperWindow=t,__reflect(t.prototype,"ap.DeveloperWindow")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.description="",i.inputGroup=new e.MiniGameInput,i.selectGroup=new e.MiniGameSelect,i.skinName="GameScreen",i.addEventListener(eui.UIEvent.CREATION_COMPLETE,i.createCompleteEvent,i),i}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.GameScreenMediator(this))},i.prototype.showInput=function(e,t){this.bottomGroup.removeChildren(),this.inputGroup.setQuestion(e,t),this.bottomGroup.addChild(this.inputGroup)},i.prototype.showSelect=function(e){this.bottomGroup.removeChildren(),this.selectGroup.setOptionsId(e),this.bottomGroup.addChild(this.selectGroup)},i}(eui.Component);e.GameScreen=t,__reflect(t.prototype,"ap.GameScreen")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="InputItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){},t}(eui.ItemRenderer);e.InputItemRenderer=t,__reflect(t.prototype,"ap.InputItemRenderer")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="ManageGameItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){},t}(eui.ItemRenderer);e.ManageGameItemRenderer=t,__reflect(t.prototype,"ap.ManageGameItemRenderer")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="ManageWindow",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.ManageWindowMediator(this))},i}(eui.Panel);e.ManageWindow=t,__reflect(t.prototype,"ap.ManageWindow")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.addMiniGame=function(e){void 0===e&&(e="");var t=egret.getDefinitionByName(e);this._miniGame=new t,this.addChild(this._miniGame)},i.prototype.addMiniGameObject=function(e){this.addChild(e)},i.prototype.clearStage=function(){this.removeChildren()},i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameMediator(this))},i}(eui.Component);e.MiniGame=t,__reflect(t.prototype,"ap.MiniGame")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameCubeStop",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameCubeStopMediator(this))},i.prototype.setQuestionId=function(e){this.questionId=e},i}(eui.Component);e.MiniGameCubeStop=t,__reflect(t.prototype,"ap.MiniGameCubeStop")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameFloorSwitch",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameFloorSwitchMediator(this))},i.prototype.setQuestionId=function(e){this.questionId=e},i}(eui.Component);e.MiniGameFloorSwitch=t,__reflect(t.prototype,"ap.MiniGameFloorSwitch")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameInput",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameInputMediator(this))},i.prototype.setQuestion=function(e,t){this.questionId=e,this.answer=t},i}(eui.Component);e.MiniGameInput=t,__reflect(t.prototype,"ap.MiniGameInput")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameJigsawM08",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameJigsawM08Mediator(this))},i.prototype.setQuestionId=function(e){this.questionId=e},i}(eui.Component);e.MiniGameJigsawM08=t,__reflect(t.prototype,"ap.MiniGameJigsawM08")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameJigsawM16",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameJigsawM16Mediator(this))},i.prototype.setQuestionId=function(e){this.questionId=e},i}(eui.Component);e.MiniGameJigsawM16=t,__reflect(t.prototype,"ap.MiniGameJigsawM16")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameM42",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight-135,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameM42Mediator(this))},i.prototype.setQuestionId=function(e){this.questionId=e},i}(eui.Component);e.MiniGameM42=t,__reflect(t.prototype,"ap.MiniGameM42")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameM8_2",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameM8_2Mediator(this))},i.prototype.setQuestionId=function(e){this.questionId=e},i}(eui.Component);e.MiniGameM8_2=t,__reflect(t.prototype,"ap.MiniGameM8_2")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="MiniGameSelect",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.MiniGameSelectMediator(this))},i.prototype.setOptionsId=function(e){this.optionsId=e},i}(eui.Component);e.MiniGameSelect=t,__reflect(t.prototype,"ap.MiniGameSelect")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="NewPlayerGuide",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.NewPlayerGuideMediator(this))},i}(eui.Panel);e.NewPlayerGuide=t,__reflect(t.prototype,"ap.NewPlayerGuide")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.skinName="PopupWindow",i.appVersion=e.platform.appVersion,i.addEventListener(eui.UIEvent.CREATION_COMPLETE,i.createCompleteEvent,i),i.btnConfirm.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){i.close(),i.cbk&&i.cbk()},i),i}return __extends(i,t),i.prototype.createCompleteEvent=function(e){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this)},i.prototype.setPopupWindow=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=null),this.msg=e,this.cbk=i,this.hasCancel=t,this.btnConfirm.right=t?45:190,this.showMoneyIcon()},i.prototype.showMoneyIcon=function(){-1==this.msg.indexOf("青豆")?this.textGroup.visible=!1:(this.textGroup.visible=!0,this.textMsg.text=this.msg.replace("青豆",""),this.msg="")},i.prototype.insertIcon=function(){if(this.textIconGroup.removeChildren(),-1==this.msg.indexOf("青豆"))return void(this.textGroup.visible=!1);this.textGroup.visible=!0;var e=new eui.Image;e.source="money",e.width=e.height=44;var t=this.msg.indexOf("青豆"),i=this.msg.replace("青豆",'<font size = "'+e.width+'">　</font>');this.msg="",this.textMsg.textFlow=(new egret.HtmlTextParser).parser(i);var n=this.textMsg.x+this.textMsg.size*t%600,o=this.textMsg.y+Math.floor(this.textMsg.size*t/600)*this.textMsg.textHeight;console.log(n,o),e.x=n,e.y=o,this.textIconGroup.addChild(e)},i}(eui.Panel);e.PopupWindow=t,__reflect(t.prototype,"ap.PopupWindow")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuestionSelectItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.fontSize=40,this.data.option.length>15&&(this.fontSize=32),this.data.isSelected&&(this.scaleX=this.scaleY=.9)},t}(eui.ItemRenderer);e.QuestionSelectItemRenderer=t,__reflect(t.prototype,"ap.QuestionSelectItemRenderer")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="SceneDetailsItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){},t}(eui.ItemRenderer);e.SceneDetailsItemRenderer=t,__reflect(t.prototype,"ap.SceneDetailsItemRenderer")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="SceneDetailsWindow",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.SceneDetailsWindowMediator(this))},i.prototype.setSceneType=function(t){this.type=t,t==e.SceneType.SceneBg?(this.titleRes="title-scene-cg",this.title=""):t==e.SceneType.ScenePerson?(this.titleRes="",this.title="人物CG"):(this.titleRes="",this.title="道具CG")},i}(eui.Panel);e.SceneDetailsWindow=t,__reflect(t.prototype,"ap.SceneDetailsWindow")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="SceneSummaryWindow",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.SceneSummaryWindowMediator(this))},i}(eui.Panel);e.SceneSummaryWindow=t,__reflect(t.prototype,"ap.SceneSummaryWindow")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="SettingWindow",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.SettingWindowMediator(this))},i}(eui.Panel);e.SettingWindow=t,__reflect(t.prototype,"ap.SettingWindow")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="StartScreen",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.navigationBar.y=this.stage.stageHeight-this.navigationBar.height-20,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.StartScreenMediator(this))},i}(eui.Component);e.StartScreen=t,__reflect(t.prototype,"ap.StartScreen")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="StoreWindow",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.height=this.stage.stageHeight,this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.StoreWindowMediator(this))},i}(eui.Panel);e.StoreWindow=t,__reflect(t.prototype,"ap.StoreWindow")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="SwitchItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){this.data.isSelected&&(this.buttonImg.scaleX=this.buttonImg.scaleY=.9)},t}(eui.ItemRenderer);e.SwitchItemRenderer=t,__reflect(t.prototype,"ap.SwitchItemRenderer")}(ap||(ap={}));var ap;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName="shop_list",e.addEventListener(eui.UIEvent.CREATION_COMPLETE,e.createCompleteEvent,e),e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),e.ApplicationFacade.getInstance().registerMediator(new e.shop_listMediator(this))},i}(eui.ItemRenderer);e.shop_list=t,__reflect(t.prototype,"ap.shop_list")}(ap||(ap={}));var ap;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="M3_2_List",t}return __extends(t,e),t}(eui.ItemRenderer);e.wordList=t,__reflect(t.prototype,"ap.wordList")}(ap||(ap={}));